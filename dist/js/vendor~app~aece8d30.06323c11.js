(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["vendor~app~aece8d30"],{"2d03":function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var s=i("0c8b"),o=i("66c2"),r=i("2049"),n=i("4402");class a{static get cache(){return a._cache}static set cache(e){a._cache=e}static mathMLToAccessible(e,t,i){"undefined"===typeof t&&(t="en"),r["a"].containClass(e,"wrs_chemistry")&&(i.mode="chemistry");let s="";if(a.cache.get(e))s=a.cache.get(e);else{i.service="mathml2accessible",i.lang=t;const r=JSON.parse(o["a"].getService("service",i));"error"!==r.status?(s=r.result.text,a.cache.populate(e,s)):s=n["a"].get("error_convert_accessibility")}return s}}a._cache=new s["a"]},"5a04":function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var s=i("f56d"),o=i("1331");class r{static removeImgDataAttributes(e){const t=[],{attributes:i}=e;Object.keys(i).forEach(e=>{const s=i[e];0===s.name.indexOf("data-")&&t.push(s.name)}),t.forEach(t=>{e.removeAttribute(t)})}static clone(e,t){const i=s["a"].get("imageCustomEditorName");e.hasAttribute(i)||t.removeAttribute(i);const o=s["a"].get("imageMathmlAttribute"),r=[o,i,"alt","height","width","style","src","role"];r.forEach(i=>{const s=e.getAttribute(i);s&&t.setAttribute(i,s)})}static setImgSize(e,t,i){let n,a,l,d;if(i)if("svg"===s["a"].get("imageFormat"))if("base64"!==s["a"].get("saveMode"))n=r.getMetricsFromSvgString(t);else{a=e.src.substr(e.src.indexOf("base64,")+7,e.src.length),d="",l=o["a"].b64ToByteArray(a,a.length);for(let e=0;e<l.length;e+=1)d+=String.fromCharCode(l[e]);n=r.getMetricsFromSvgString(d)}else a=e.src.substr(e.src.indexOf("base64,")+7,e.src.length),l=o["a"].b64ToByteArray(a,88),n=r.getMetricsFromBytes(l);else n=o["a"].urlToAssArray(t);let c=n.cw;if(!c)return;let h=n.ch,g=n.cb;const{dpi:m}=n;m&&(c=96*c/m,h=96*h/m,g=96*g/m),e.width=c,e.height=h,e.style.verticalAlign=`-${h-g}px`}static fixAfterResize(e){if(e.removeAttribute("style"),e.removeAttribute("width"),e.removeAttribute("height"),e.style.maxWidth="none",-1!==e.src.indexOf("data:image"))if("svg"===s["a"].get("imageFormat")){const t=decodeURIComponent(e.src.substring(32,e.src.length));r.setImgSize(e,t,!0)}else{const t=e.src.substring(22,e.src.length);r.setImgSize(e,t,!0)}else r.setImgSize(e,e.src)}static getMetricsFromSvgString(e){let t=e.indexOf('height="'),i=e.indexOf('"',t+8,e.length);const s=e.substring(t+8,i);t=e.indexOf('width="'),i=e.indexOf('"',t+7,e.length);const o=e.substring(t+7,i);t=e.indexOf('wrs:baseline="'),i=e.indexOf('"',t+14,e.length);const r=e.substring(t+14,i);if("undefined"!==typeof o){const e=[];return e.cw=o,e.ch=s,"undefined"!==typeof r&&(e.cb=r),e}return[]}static getMetricsFromBytes(e){let t,i,s,r,n;o["a"].readBytes(e,0,8);while(e.length>=4)s=o["a"].readInt32(e),1229472850===s?(t=o["a"].readInt32(e),i=o["a"].readInt32(e),o["a"].readInt32(e),o["a"].readByte(e)):1650545477===s?r=o["a"].readInt32(e):1883789683===s&&(n=o["a"].readInt32(e),n=Math.round(n/39.37),o["a"].readInt32(e),o["a"].readByte(e)),o["a"].readInt32(e);if("undefined"!==typeof t){const e=[];return e.cw=t,e.ch=i,e.dpi=n,r&&(e.cb=r),e}return[]}}},6013:function(e,t,i){"use strict";i.d(t,"a",(function(){return d}));var s=i("b8b6"),o=i("5a04"),r=i("e5b7"),n=i("1331"),a=i("f56d"),l=i("66c2");class d{constructor(e){if(this.language="en",this.serviceProviderProperties={},"serviceProviderProperties"in e&&(this.serviceProviderProperties=e.serviceProviderProperties),this.configurationService="","configurationService"in e&&(this.serviceProviderProperties.URI=e.configurationService,console.warn("Deprecated property configurationService. Use serviceParameters on instead.",[e.configurationService])),this.version="version"in e?e.version:"",this.target=null,!("target"in e))throw new Error("IntegrationModel constructor error: target property missed.");this.target=e.target,"scriptName"in e&&(this.scriptName=e.scriptName),this.callbackMethodArguments={},"callbackMethodArguments"in e&&(this.callbackMethodArguments=e.callbackMethodArguments),this.environment={},"environment"in e&&(this.environment=e.environment),this.isIframe=!1,null!=this.target&&(this.isIframe="IFRAME"===this.target.tagName.toUpperCase()),this.editorObject=null,"editorObject"in e&&(this.editorObject=e.editorObject),this.rtl=!1,"rtl"in e&&(this.rtl=e.rtl),this.managesLanguage=!1,"managesLanguage"in e&&(this.managesLanguage=e.managesLanguage),this.temporalImageResizing=!1,this.core=null,this.listeners=new r["a"],"integrationParameters"in e&&d.integrationParameters.forEach(t=>{if(t in e.integrationParameters){const i=e.integrationParameters[t];0!==Object.keys(i).length&&(this[t]=i)}})}init(){this.language=this.getLanguage();const e=r["a"].newListener("onLoad",()=>{this.callbackFunction(this.callbackMethodArguments)});if(-1!==this.serviceProviderProperties.URI.indexOf("configuration")){const e=this.serviceProviderProperties.URI,t=l["a"].getServerLanguageFromService(e);this.serviceProviderProperties.server=t;const i=this.serviceProviderProperties.URI.indexOf("configuration"),s=this.serviceProviderProperties.URI.substring(0,i);this.serviceProviderProperties.URI=s}let t=this.serviceProviderProperties.URI;t=0===t.indexOf("/")||0===t.indexOf("http")?t:n["a"].concatenateUrl(this.getPath(),t),this.serviceProviderProperties.URI=t;const i={};i.serviceProviderProperties=this.serviceProviderProperties,this.setCore(new s["a"](i)),this.core.addListener(e),this.core.language=this.language,this.core.init(),this.core.setEnvironment(this.environment)}getPath(){if("undefined"===typeof this.scriptName)throw new Error("scriptName property needed for getPath.");const e=document.getElementsByTagName("script");let t="";for(let i=0;i<e.length;i+=1){const s=e[i].src.lastIndexOf(this.scriptName);s>=0&&(t=e[i].src.substr(0,s-1))}return t}getVersion(){return this.version}setLanguage(e){this.language=e}setCore(e){this.core=e,e.setIntegrationModel(this)}getCore(){return this.core}setTarget(e){this.target=e,this.isIframe="IFRAME"===this.target.tagName.toUpperCase()}setEditorObject(e){this.editorObject=e}openNewFormulaEditor(){this.core.editionProperties.isNewElement=!0,this.core.openModalDialog(this.target,this.isIframe)}openExistingFormulaEditor(){this.core.editionProperties.isNewElement=!1,this.core.openModalDialog(this.target,this.isIframe)}updateFormula(e){let t,i;this.editorParameters&&(e=com.wiris.editor.util.EditorUtils.addAnnotation(e,"application/vnd.wiris.mtweb-params+json",JSON.stringify(this.editorParameters)));const s=null;this.isIframe?(t=this.target.contentWindow,i=this.target.contentWindow):(t=this.target,i=window);let o=this.core.beforeUpdateFormula(e,s);return o?(o=this.insertFormula(t,i,o.mathml,o.wirisProperties),o?this.core.afterUpdateFormula(o.focusElement,o.windowTarget,o.node,o.latex):""):""}insertFormula(e,t,i,s){return this.core.insertFormula(e,t,i,s)}getSelection(){return this.isIframe?(this.target.contentWindow.focus(),this.target.contentWindow.getSelection()):(this.target.focus(),window.getSelection())}addEvents(){const e=this.isIframe?this.target.contentWindow.document:this.target;n["a"].addElementEvents(e,(e,t)=>{this.doubleClickHandler(e,t)},(e,t)=>{this.mousedownHandler(e,t)},(e,t)=>{this.mouseupHandler(e,t)})}doubleClickHandler(e){if("img"===e.nodeName.toLowerCase()){this.core.getCustomEditors().disable();const t=a["a"].get("imageCustomEditorName");if(e.hasAttribute(t)){const i=e.getAttribute(t);this.core.getCustomEditors().enable(i)}n["a"].containsClass(e,a["a"].get("imageClassName"))&&(this.core.editionProperties.temporalImage=e,this.core.editionProperties.isNewElement=!0,this.openExistingFormulaEditor())}}mouseupHandler(){this.temporalImageResizing&&setTimeout(()=>{o["a"].fixAfterResize(this.temporalImageResizing)},10)}mousedownHandler(e){"img"===e.nodeName.toLowerCase()&&n["a"].containsClass(e,a["a"].get("imageClassName"))&&(this.temporalImageResizing=e)}getLanguage(){return this.getBrowserLanguage()}getBrowserLanguage(){let e="en";return e=navigator.userLanguage?navigator.userLanguage.substring(0,2):navigator.language?navigator.language.substring(0,2):"en",e}callbackFunction(){const e=r["a"].newListener("onTargetReady",()=>{this.addEvents(this.target)});this.listeners.add(e)}notifyWindowClosed(){}getMathmlFromTextNode(e,t){}fillNonLatexNode(e,t,i){}getSelectedItem(e,t){}}d.prototype.getMathmlFromTextNode=void 0,d.prototype.fillNonLatexNode=void 0,d.prototype.getSelectedItem=void 0,d.integrationParameters=["serviceProviderProperties","editorParameters"]},b8b6:function(e,t,i){"use strict";i.d(t,"a",(function(){return b}));var s=i("1dae"),o=i("1331"),r=i("4402"),n=i("d0cd"),a=i("24b6"),l=i("2049");class d{constructor(){this.editors=[],this.activeEditor="default"}addEditor(e,t){const i={};i.name=t.name,i.toolbar=t.toolbar,i.icon=t.icon,i.confVariable=t.confVariable,i.title=t.title,i.tooltip=t.tooltip,this.editors[e]=i}enable(e){this.activeEditor=e}disable(){this.activeEditor="default"}getActiveEditor(){return"default"!==this.activeEditor?this.editors[this.activeEditor]:null}}var c=i("f56d");const h={imageCustomEditorName:"data-custom-editor",imageClassName:"Wirisformula",CASClassName:"Wiriscas"};var g=h;class m{constructor(){this.cancelled=!1,this.defaultPrevented=!1}cancel(){this.cancelled=!0}preventDefault(){this.defaultPrevented=!0}}var u=i("e5b7"),p=i("5a04"),f=i("66c2"),v=i("500d");i("0bfe"),i("8ac7");class b{constructor(e){this.language="en",this.editMode="images",this.modalDialog=null,this.customEditors=new d;const t={name:"Chemistry",toolbar:"chemistry",icon:"chem.png",confVariable:"chemEnabled",title:"ChemType",tooltip:"Insert a chemistry formula - ChemType"};if(this.customEditors.addEditor("chemistry",t),this.environment={},this.editionProperties={},this.editionProperties.isNewElement=!0,this.editionProperties.temporalImage=null,this.editionProperties.latexRange=null,this.editionProperties.range=null,this.integrationModel=null,this.contentManager=null,this.browser=(()=>{const e=navigator.userAgent;let t="none";return e.search("Edge/")>=0?t="EDGE":e.search("Chrome/")>=0?t="CHROME":e.search("Trident/")>=0?t="IE":e.search("Firefox/")>=0?t="FIREFOX":e.search("Safari/")>=0&&(t="SAFARI"),t})(),this.listeners=new u["a"],this.serviceProviderProperties={},!("serviceProviderProperties"in e))throw new Error("serviceProviderProperties property missing.");this.serviceProviderProperties=e.serviceProviderProperties}static get globalListeners(){return b._globalListeners}static set globalListeners(e){b._globalListeners=e}static get initialized(){return b._initialized}static set initialized(e){b._initialized=e}setIntegrationModel(e){this.integrationModel=e}setEnvironment(e){"editor"in e&&(this.environment.editor=e.editor),"mode"in e&&(this.environment.mode=e.mode),"version"in e&&(this.environment.version=e.version)}getModalDialog(){return this.modalDialog}init(){if(b.initialized)this.listeners.fire("onLoad",{});else{const e=u["a"].newListener("onInit",()=>{const e=f["a"].getService("configurationjs","","get"),t=JSON.parse(e);c["a"].addConfiguration(t),c["a"].addConfiguration(g),r["a"].language=this.language,this.listeners.fire("onLoad",{})});f["a"].addListener(e),f["a"].init(this.serviceProviderProperties),b.initialized=!0}}addListener(e){this.listeners.add(e)}static addGlobalListener(e){b.globalListeners.add(e)}beforeUpdateFormula(e,t){const i=new m;return i.mathml=e,i.wirisProperties={},null!=t&&Object.keys(t).forEach(e=>{i.wirisProperties[e]=t[e]}),i.language=this.language,i.editMode=this.editMode,this.listeners.fire("onBeforeFormulaInsertion",i)||b.globalListeners.fire("onBeforeFormulaInsertion",i)?{}:{mathml:i.mathml,wirisProperties:i.wirisProperties}}insertFormula(e,t,i,o){const r={};if(i)if("latex"===this.editMode){if(r.latex=a["a"].getLatexFromMathML(i),this.integrationModel.fillNonLatexNode&&!r.latex){const s=new m;s.editMode=this.editMode,s.windowTarget=t,s.focusElement=e,s.latex=r.latex,this.integrationModel.fillNonLatexNode(s,t,i)}else r.node=t.document.createTextNode(`$$${r.latex}$$`);this.insertElementOnSelection(r.node,e,t)}else r.node=s["a"].mathmlToImgObject(t.document,i,o,this.language),this.insertElementOnSelection(r.node,e,t);else this.insertElementOnSelection(null,e,t);return r}afterUpdateFormula(e,t,i,s){const o=new m;return o.editMode=this.editMode,o.windowTarget=t,o.focusElement=e,o.node=i,o.latex=s,this.listeners.fire("onAfterFormulaInsertion",o)||b.globalListeners.fire("onAfterFormulaInsertion",o),{}}placeCaretAfterNode(e){this.integrationModel.getSelection();const t=e.ownerDocument;if("undefined"!==typeof t.getSelection&&e.parentElement){const i=t.createRange();i.setStartAfter(e),i.collapse(!0);const s=t.getSelection();s.removeAllRanges(),s.addRange(i),t.body.focus()}}insertElementOnSelection(e,t,i){if(this.editionProperties.isNewElement)if(e)if("textarea"===t.type)o["a"].updateTextArea(t,e.textContent);else if(document.selection&&0===document.getSelection){let t=i.document.selection.createRange();if(i.document.execCommand("InsertImage",!1,e.src),"parentElement"in t||(i.document.execCommand("delete",!1),t=i.document.selection.createRange(),i.document.execCommand("InsertImage",!1,e.src)),"parentElement"in t){const i=t.parentElement();"IMG"===i.nodeName.toUpperCase()?i.parentNode.replaceChild(e,i):t.pasteHTML(o["a"].createObjectCode(e))}}else{const t=this.integrationModel.getSelection();let i=null;this.editionProperties.range?(({range:i}=this.editionProperties),this.editionProperties.range=null):i=t.getRangeAt(0),i.deleteContents();let s=i.startContainer;const o=i.startOffset;3===s.nodeType?(s=s.splitText(o),s.parentNode.insertBefore(e,s)):1===s.nodeType&&s.insertBefore(e,s.childNodes[o]),this.placeCaretAfterNode(e)}else if("textarea"===t.type)t.focus();else{const e=this.integrationModel.getSelection();if(e.removeAllRanges(),this.editionProperties.range){const{range:t}=this.editionProperties;this.editionProperties.range=null,e.addRange(t)}}else if(this.editionProperties.latexRange)document.selection&&0===document.getSelection?(this.editionProperties.isNewElement=!0,this.editionProperties.latexRange.select(),this.insertElementOnSelection(e,t,i)):(this.editionProperties.latexRange.deleteContents(),this.editionProperties.latexRange.insertNode(e),this.placeCaretAfterNode(e));else if("textarea"===t.type){let i;i="undefined"!==typeof this.integrationModel.getSelectedItem?this.integrationModel.getSelectedItem(t,!1):o["a"].getSelectedItemOnTextarea(t),o["a"].updateExistingTextOnTextarea(t,e.textContent,i.startPosition,i.endPosition)}else e&&"img"===e.nodeName.toLowerCase()?(p["a"].removeImgDataAttributes(this.editionProperties.temporalImage),p["a"].clone(e,this.editionProperties.temporalImage)):this.editionProperties.temporalImage.remove(),this.placeCaretAfterNode(this.editionProperties.temporalImage)}openModalDialog(e,t){this.editMode="images";try{if(t){e.contentWindow.focus();const t=e.contentWindow.getSelection();this.editionProperties.range=t.getRangeAt(0)}else{e.focus();const t=getSelection();this.editionProperties.range=t.getRangeAt(0)}}catch(m){this.editionProperties.range=null}if(void 0===t&&(t=!0),this.editionProperties.latexRange=null,e){let i;if(i="undefined"!==typeof this.integrationModel.getSelectedItem?this.integrationModel.getSelectedItem(e,t):o["a"].getSelectedItem(e,t),i){if(!i.caretPosition&&o["a"].containsClass(i.node,c["a"].get("imageClassName")))this.editionProperties.temporalImage=i.node,this.editionProperties.isNewElement=!1;else if(3===i.node.nodeType)if(this.integrationModel.getMathmlFromTextNode){const e=this.integrationModel.getMathmlFromTextNode(i.node,i.caretPosition);e&&(this.editMode="latex",this.editionProperties.isNewElement=!1,this.editionProperties.temporalImage=document.createElement("img"),this.editionProperties.temporalImage.setAttribute(c["a"].get("imageMathmlAttribute"),l["a"].safeXmlEncode(e)))}else{const s=a["a"].getLatexFromTextNode(i.node,i.caretPosition);if(s){const i=a["a"].getMathMLFromLatex(s.latex);this.editMode="latex",this.editionProperties.isNewElement=!1,this.editionProperties.temporalImage=document.createElement("img"),this.editionProperties.temporalImage.setAttribute(c["a"].get("imageMathmlAttribute"),l["a"].safeXmlEncode(i));const r=t?e.contentWindow:window;if("textarea"!==e.tagName.toLowerCase())if(document.selection){let e=0,t=s.startNode.previousSibling;while(t)e+=o["a"].getNodeLength(t),t=t.previousSibling;this.editionProperties.latexRange=r.document.selection.createRange(),this.editionProperties.latexRange.moveToElementText(s.startNode.parentNode),this.editionProperties.latexRange.move("character",e+s.startPosition),this.editionProperties.latexRange.moveEnd("character",s.latex.length+4)}else this.editionProperties.latexRange=r.document.createRange(),this.editionProperties.latexRange.setStart(s.startNode,s.startPosition),this.editionProperties.latexRange.setEnd(s.endNode,s.endPosition)}}}else"textarea"===e.tagName.toLowerCase()&&(this.editMode="latex")}const i=c["a"].get("editorAttributes").split(", "),s={};for(let o=0,n=i.length;o<n;o+=1){const e=i[o].split("="),t=e[0],r=e[1];s[t]=r}const r={},d=c["a"].get("editorParameters"),h=this.integrationModel.editorParameters;Object.assign(r,s,d),Object.assign(r,s,h),r.language=this.language,r.rtl=this.integrationModel.rtl;const g={};if(g.editorAttributes=r,g.language=this.language,g.customEditors=this.customEditors,g.environment=this.environment,null==this.modalDialog){this.modalDialog=new v["a"](r),this.contentManager=new n["a"](g);const e=u["a"].newListener("onLoad",()=>{if(this.contentManager.isNewElement=this.editionProperties.isNewElement,null!=this.editionProperties.temporalImage){const e=l["a"].safeXmlDecode(this.editionProperties.temporalImage.getAttribute(c["a"].get("imageMathmlAttribute")));this.contentManager.mathML=e}});this.contentManager.addListener(e),this.contentManager.init(),this.modalDialog.setContentManager(this.contentManager),this.contentManager.setModalDialogInstance(this.modalDialog)}else if(this.contentManager.isNewElement=this.editionProperties.isNewElement,null!=this.editionProperties.temporalImage){const e=l["a"].safeXmlDecode(this.editionProperties.temporalImage.getAttribute(c["a"].get("imageMathmlAttribute")));this.contentManager.mathML=e}this.contentManager.setIntegrationModel(this.integrationModel),this.modalDialog.open()}getCustomEditors(){return this.customEditors}}b._globalListeners=new u["a"],b._initialized=!1},d0cd:function(e,t,i){"use strict";i.d(t,"a",(function(){return l}));var s=i("f56d");class o{constructor(){this.isContentChanged=!1,this.waitingForChanges=!1}setIsContentChanged(e){this.isContentChanged=e}getIsContentChanged(){return this.isContentChanged}setWaitingForChanges(e){this.waitingForChanges=e}caretPositionChanged(e){}clipboardChanged(e){}contentChanged(e){!0===this.waitingForChanges&&!1===this.isContentChanged&&(this.isContentChanged=!0)}styleChanged(e){}transformationReceived(e){}}var r=i("e5b7"),n=i("2049"),a=i("1331");class l{constructor(e){if(this.editorAttributes={},!("editorAttributes"in e))throw new Error("ContentManager constructor error: editorAttributes property missed.");if(this.editorAttributes=e.editorAttributes,this.customEditors=null,"customEditors"in e&&(this.customEditors=e.customEditors),this.environment={},!("environment"in e))throw new Error("ContentManager constructor error: environment property missed");if(this.environment=e.environment,this.language="",!("language"in e))throw new Error("ContentManager constructor error: language property missed");this.language=e.language,this.editorListener=new o,this.editor=null,this.ua=navigator.userAgent.toLowerCase(),this.deviceProperties={},this.deviceProperties.isAndroid=this.ua.indexOf("android")>-1,this.deviceProperties.isIOS=l.isIOS(),this.toolbar=null,this.modalDialogInstance=null,this.listeners=new r["a"],this.mathML=null,this.isNewElement=!0,this.integrationModel=null}addListener(e){this.listeners.add(e)}setIntegrationModel(e){this.integrationModel=e}setModalDialogInstance(e){this.modalDialogInstance=e}insert(){this.updateTitle(this.modalDialogInstance),this.insertEditor(this.modalDialogInstance)}insertEditor(){if(l.isEditorLoaded()){if(this.editor=window.com.wiris.jsEditor.JsEditor.newInstance(this.editorAttributes),this.editor.insertInto(this.modalDialogInstance.contentContainer),this.editor.focus(),this.modalDialogInstance.rtl&&this.editor.action("rtl"),this.editor.getEditorModel().isRTL()&&(this.editor.element.style.direction="rtl"),this.editor.getEditorModel().addEditorListener(this.editorListener),this.modalDialogInstance.deviceProperties.isIOS){setTimeout((function(){this.hasOwnProperty("modalDialogInstance")&&this.modalDialogInstance.hideKeyboard()}),400);const e=document.getElementsByClassName("wrs_formulaDisplay")[0];a["a"].addEvent(e,"focus",this.modalDialogInstance.handleOpenedIosSoftkeyboard),a["a"].addEvent(e,"blur",this.modalDialogInstance.handleClosedIosSoftkeyboard)}this.listeners.fire("onLoad",{})}else setTimeout(l.prototype.insertEditor.bind(this),100)}init(){l.isEditorLoaded()||this.addEditorAsExternalDependency()}addEditorAsExternalDependency(){const e=document.createElement("script");e.type="text/javascript";let t=s["a"].get("editorUrl");const i=document.createElement("a");l.setHrefToAnchorElement(i,t),l.setProtocolToAnchorElement(i),t=l.getURLFromAnchorElement(i);const o=this.getEditorStats();e.src=`${t}?lang=${this.language}&stats-editor=${o.editor}&stats-mode=${o.mode}&stats-version=${o.version}`,document.getElementsByTagName("head")[0].appendChild(e)}static setHrefToAnchorElement(e,t){e.href=t}static setProtocolToAnchorElement(e){0===window.location.href.indexOf("https://")&&"http:"===e.protocol&&(e.protocol="https:")}static getURLFromAnchorElement(e){if("80"===e.port||"443"===e.port||""===e.port)return`${e.protocol}//${e.hostname}/${e.pathname}`}getEditorStats(){const e={};return"editor"in this.environment?e.editor=this.environment.editor:e.editor="unknown","mode"in this.environment?e.mode=this.environment.mode:e.mode=s["a"].get("saveMode"),"version"in this.environment?e.version=this.environment.version:e.version=s["a"].get("version"),e}static isIOS(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}static isEditorLoaded(){return window.com&&window.com.wiris&&window.com.wiris.jsEditor&&window.com.wiris.jsEditor.JsEditor&&window.com.wiris.jsEditor.JsEditor.newInstance}setInitialContent(){this.isNewElement||this.setMathML(this.mathML)}setMathML(e,t){"undefined"===typeof t&&(t=!1),this.editor.setMathMLWithCallback(e,()=>{this.editorListener.setWaitingForChanges(!0)}),setTimeout(()=>{this.editorListener.setIsContentChanged(!1)},500),t||this.onFocus()}onFocus(){"undefined"!==typeof this.editor&&null!=this.editor&&this.editor.focus()}submitAction(){if(this.editor.isFormulaEmpty())this.integrationModel.updateFormula(null);else{let e=this.editor.getMathMLWithSemantics();if(null!==this.customEditors.getActiveEditor()){const{toolbar:t}=this.customEditors.getActiveEditor();e=n["a"].addCustomEditorClassAttribute(e,t)}else Object.keys(this.customEditors.editors).forEach(t=>{e=n["a"].removeCustomEditorClassAttribute(e,t)});const t=n["a"].mathMLEntities(e);this.integrationModel.updateFormula(t)}this.customEditors.disable(),this.integrationModel.notifyWindowClosed(),this.setEmptyMathML(),this.customEditors.disable()}setEmptyMathML(){this.deviceProperties.isAndroid||this.deviceProperties.isIOS?this.editor.getEditorModel().isRTL()?this.setMathML('<math dir="rtl"><semantics><annotation encoding="application/json">[]</annotation></semantics></math>',!0):this.setMathML('<math><semantics><annotation encoding="application/json">[]</annotation></semantics></math>',!0):this.editor.getEditorModel().isRTL()?this.setMathML('<math dir="rtl"/>',!0):this.setMathML("<math/>",!0)}onOpen(){this.isNewElement?this.setEmptyMathML():this.setMathML(this.mathML),this.updateToolbar(),this.onFocus()}updateToolbar(){this.updateTitle(this.modalDialogInstance);const e=this.customEditors.getActiveEditor();if(e){const t=e.toolbar?e.toolbar:_wrs_int_wirisProperties.toolbar;null!=this.toolbar&&this.toolbar===t||this.setToolbar(t)}else{const e=this.getToolbar();null!=this.toolbar&&this.toolbar===e||(this.setToolbar(e),this.customEditors.disable())}}updateTitle(){const e=this.customEditors.getActiveEditor();e?this.modalDialogInstance.setTitle(e.title):this.modalDialogInstance.setTitle("MathType")}getToolbar(){let e="general";return"toolbar"in this.editorAttributes&&({toolbar:e}=this.editorAttributes),"general"===e&&(e="undefined"===typeof _wrs_int_wirisProperties||"undefined"===typeof _wrs_int_wirisProperties.toolbar?"general":_wrs_int_wirisProperties.toolbar),e}setToolbar(e){this.toolbar=e,this.editor.setParams({toolbar:this.toolbar})}hasChanges(){return!this.editor.isFormulaEmpty()&&this.editorListener.getIsContentChanged()}onKeyDown(e){if(void 0!==e.key&&!1===e.repeat)if("Escape"===e.key||"Esc"===e.key){let t=document.getElementsByClassName("wrs_expandButton wrs_expandButtonFor3RowsLayout wrs_pressed");0===t.length&&(t=document.getElementsByClassName("wrs_expandButton wrs_expandButtonFor2RowsLayout wrs_pressed"),0===t.length&&(t=document.getElementsByClassName("wrs_select wrs_pressed"),0===t.length&&(this.modalDialogInstance.cancelAction(),e.stopPropagation(),e.preventDefault())))}else if(e.shiftKey&&"Tab"===e.key)if(document.activeElement===this.modalDialogInstance.submitButton)this.editor.focus(),e.stopPropagation(),e.preventDefault();else{const t=document.querySelector('[title="Manual"]');document.activeElement===t&&(this.modalDialogInstance.cancelButton.focus(),e.stopPropagation(),e.preventDefault())}else if("Tab"===e.key)if(document.activeElement===this.modalDialogInstance.cancelButton){const t=document.querySelector('[title="Manual"]');t.focus(),e.stopPropagation(),e.preventDefault()}else{const t=document.getElementsByClassName("wrs_formulaDisplay")[0];"wrs_formulaDisplay wrs_focused"===t.getAttribute("class")&&(this.modalDialogInstance.submitButton.focus(),e.stopPropagation(),e.preventDefault())}}}},d55b:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));class s{static get safeXmlCharactersEntities(){return{tagOpener:"&laquo;",tagCloser:"&raquo;",doubleQuote:"&uml;",realDoubleQuote:"&quot;"}}static get safeBadBlackboardCharacters(){return{ltElement:"«mo»<«/mo»",gtElement:"«mo»>«/mo»",ampElement:"«mo»&«/mo»"}}static get safeGoodBlackboardCharacters(){return{ltElement:"«mo»§lt;«/mo»",gtElement:"«mo»§gt;«/mo»",ampElement:"«mo»§amp;«/mo»"}}static get xmlCharacters(){return{id:"xmlCharacters",tagOpener:"<",tagCloser:">",doubleQuote:'"',ampersand:"&",quote:"'"}}static get safeXmlCharacters(){return{id:"safeXmlCharacters",tagOpener:"«",tagCloser:"»",doubleQuote:"¨",ampersand:"§",quote:"`",realDoubleQuote:"¨"}}}},f56d:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));class s{static addConfiguration(e){Object.assign(s.properties,e)}static get properties(){return s._properties}static set properties(e){s._properties=e}static get(e){return Object.prototype.hasOwnProperty.call(s.properties,e)?s.properties[e]:!!Object.prototype.hasOwnProperty.call(s.properties,"_wrs_conf_")&&s.properties["_wrs_conf_"+e]}static set(e,t){s.properties[e]=t}static update(e,t){if(s.get(e)){const i=Object.assign(s.get(e),t);s.set(e,i)}else s.set(e,t)}}s._properties={}}}]);