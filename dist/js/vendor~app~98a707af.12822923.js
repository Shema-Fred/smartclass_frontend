(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["vendor~app~98a707af"],{2623:function(t,e,s){"use strict";e["a"]={namespaced:!0,state:function(){return{data:null,quizes:[]}},mutations:{mutateSchoolData:function(t,e){t.data=e},mutateQuiz:function(t,e){t.quizes=e}},actions:{setSchoolData:function(t,e){t.commit("mutateSchoolData",e)},SET_SCHOOL_QUIZ:function(t,e){t.commit("mutateQuiz",e)}},getters:{}}},"2eb8":function(t,e,s){},"3d44":function(t,e,s){},"3d48":function(t,e,s){},"4c80":function(t,e,s){},"5e81":function(t,e,s){},6483:function(t,e,s){"use strict";var a=s("2eb8"),n=s.n(a);n.a},"69aa":function(t,e,s){},"72d8":function(t,e,s){"use strict";var a=s("69aa"),n=s.n(a);n.a},"74ab":function(t,e,s){},"76c6":function(t,e,s){"use strict";var a=s("4c80"),n=s.n(a);n.a},"76e2":function(t,e,s){"use strict";var a=s("74ab"),n=s.n(a);n.a},"7d1b":function(t,e,s){"use strict";var a=s("5e81"),n=s.n(a);n.a},"7fe1":function(t,e,s){},ad13:function(t,e,s){"use strict";var a=s("7fe1"),n=s.n(a);n.a},b6e8:function(t,e,s){"use strict";var a=s("3d44"),n=s.n(a);n.a},b8a5:function(t,e,s){"use strict";var a=s("eb42"),n=s.n(a);n.a},b965:function(t,e,s){},c3ef:function(t,e,s){},c51a:function(t,e,s){"use strict";var a=s("3d48"),n=s.n(a);n.a},e64c:function(t,e,s){"use strict";var a=s("c3ef"),n=s.n(a);n.a},eb42:function(t,e,s){},f076:function(t,e,s){"use strict";var a=s("b965"),n=s.n(a);n.a},f57a:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",{staticClass:"school d-flex flex-nowrap"},[s("school-sidebar"),s("main",{staticClass:"d-flex flex-column w-100"},[s("school-nav"),s("transition",{attrs:{name:"component-fade",mode:"out-in"}},[s("router-view")],1)],1)],1)},n=[],o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-navbar",{staticClass:"school-navbar w-100",attrs:{type:"dark",variant:"light"}},[a("b-navbar-brand",{staticClass:"ml-md-4 ml-3",attrs:{tag:"div"}},[a("img",{staticClass:"logo",attrs:{src:s("ed29"),alt:"Smartclass Logo"}})]),a("b-navbar-nav",{staticClass:"ml-auto align-items-lg-center",attrs:{align:"center",fill:""}},[a("b-nav-item-dropdown",{staticClass:"px-2",attrs:{"no-caret":"","toggle-class":"text-decoration-none","exact-active-class":"text-primary","menu-class":"py-0",right:""},scopedSlots:t._u([{key:"button-content",fn:function(){return[a("b-button",{staticClass:"py-2 text-dark",attrs:{variant:"link"}},[a("b-icon-bell",{attrs:{scale:"1.23"}})],1)]},proxy:!0}])},[t.state.loadingNotif?a("div",{staticClass:"p-5 d-flex align-items-center justify-content-center",staticStyle:{"min-width":"300px","min-height":"150px"}},[a("b-spinner")],1):t.notificationsAvailable?a("div",{staticStyle:{"min-width":"300px","min-height":"150px"}},t._l(4,(function(e){return a("div",{key:e},[t.notifications[e]?a("b-dropdown-item",{staticClass:"py-0",attrs:{"link-class":"py-3"}},[t._v(" "+t._s(t.notifications[e].message)+" ")]):t._e(),a("hr",{staticClass:"dropdown-devider m-0"})],1)})),0):a("div",{staticClass:"py-4",staticStyle:{"min-width":"300px"}},[a("b-dropdown-text",{staticClass:"text-center py-1"},[t._v(" No available notifications at the moment! ")])],1),t.state.loadingNotif?t._e():a("b-dropdown-text",{staticClass:"text-center bg-primary text-light cursor-pointer",on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.fetchNotifications(e)}}},[t._v(" Refresh ")])],1),a("b-nav-item-dropdown",{attrs:{"no-caret":"",right:""},scopedSlots:t._u([{key:"button-content",fn:function(){return[a("b-button",{staticClass:"py-2 account-btn text-dark text-decoration-none",attrs:{variant:"link"}},[a("b-icon-person-circle",{attrs:{scale:"1.5"}}),a("span",{staticClass:"ml-2 d-none d-sm-inline"},[t._v("Account")])],1)]},proxy:!0}])},[t.user?a("b-dropdown-text",[t._v(t._s(t.username))]):t._e(),t.user?a("b-dd-divider"):t._e(),a("b-dropdown-item",{attrs:{"link-class":"py-2","active-class":"bg-primary text-light",to:{name:"school-chatrooms"}}},[t._v(" Chatroom ")]),a("b-dropdown-item",{attrs:{"link-class":"py-2","active-class":"bg-primary text-light",to:{name:"school-profile"}}},[t._v(" Profile ")]),a("b-dd-divider"),a("b-dropdown-item",{attrs:{to:"/logout","link-class":"text-danger"}},[t._v(" Logout ")])],1)],1)],1)},i=[],r=(s("96cf"),s("1da1")),l={name:"school-navbar-component",props:{sidebarShown:{type:Boolean,default:!0}},data:function(){return{state:{loadingNotif:!1},notifications:[]}},computed:{user:function(){return this.$store.state.school.data},username:function(){return this.user?this.user.userame:""},notificationsAvailable:function(){return!!Array.isArray(this.notifications)&&!(this.notifications.length<1)}},mounted:function(){console.log(this.user)},beforeMount:function(){this.fetchNotifications()},methods:{fetchNotifications:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var s,a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.state.loadingNotif=!0,s={action:"schoolAdNotifications",userId:t.user.user_id,school:t.user.school},e.prev=2,e.next=5,t.axios.post("notification",s);case 5:a=e.sent,n=a.data,console.log(n),Array.isArray(n)&&t.$set(t,"notifications",n),t.state.loadingNotif=!1,e.next=16;break;case 12:e.prev=12,e.t0=e["catch"](2),console.log(e.t0),t.state.loadingNotif=!1;case 16:case"end":return e.stop()}}),e,null,[[2,12]])})))()}}},c=l,u=(s("76c6"),s("2877")),d=Object(u["a"])(c,o,i,!1,null,"d11e3cce",null),m=d.exports,h=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("sidebar-menu",{staticClass:"bg-light school-nav",attrs:{menu:t.menu,showOneChild:!0,theme:"white-theme",width:"280px",widthCollapsed:"60px",relative:!0}})},b=[],f={data:function(){return{menu:[{header:!0,title:"Navigation",hiddenOnCollapse:!0},{href:{path:"/school/students/1"},title:"Students",icon:"fa fa-graduation-cap"},{href:{path:"/school/teachers"},title:"Teachers",icon:"fa fa-male"},{href:{path:"/school/assignments"},title:"Assignments",icon:"fa fa-copy"},{href:{path:"/school/notes"},title:"Notes",icon:"fa fa-bookmark"},{href:{path:"/school/books"},title:"Books",icon:"fa fa-book"},{href:{path:"/school/summaries"},title:"Summaries",icon:"fa fa-file-word"},{href:{path:"/school/videos"},title:"Videos",icon:"fa fa-file-video"},{href:{path:"/school/quizes"},title:"quizes",icon:"fa fa-file-word"},{href:{path:"/school/messaging"},title:"Messaging",icon:"fa fa-envelope"}]}}},g=f,p=(s("7d1b"),Object(u["a"])(g,h,b,!1,null,"85961242",null)),v=p.exports,x={name:"school-view",components:{SchoolSidebar:v,SchoolNav:m}},k=x,y=(s("ad13"),Object(u["a"])(k,a,n,!1,null,"55976d9a",null)),_=y.exports,w=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("b-container",{staticClass:"admin-student p-5"},[s("b-row",{staticClass:"mb-2",attrs:{"no-gutters":"","align-h":"between","align-v":"center"}},[s("h2",{staticClass:"mb-0"},[t._v("Students")]),s("b-button",{attrs:{variant:"dark",disabled:t.state.loadingStudents},on:{click:t.refresh}},[t._v(" Refresh ")])],1),s("hr",{staticClass:"mt-0 mb-4"}),t.state.refreshing?t._e():s("b-row",{attrs:{"no-gutters":"","align-h":"center","align-v":"center"}},[s("transition",{attrs:{name:"group-fade",mode:"out-in"}},[t.state.loadingStudents?s("div",{staticClass:"p-4 w-100 flex-center flex-column"},[s("app-loading",{attrs:{type:"dark"}}),s("h6",{staticClass:"mt-3"},[t._v("Loading Students")])],1):t.studentsAvailable?s("students-table",{attrs:{"students-data":t.allStudents,"total-pages":t.state.totalPages},on:{"data-edited":t.updateStudentData}}):s("b-row",{attrs:{"no-gutters":"","align-v":"center","align-h":"center"}},[s("h6",{staticClass:"text-center py-5"},[t._v("No Students available at the moment!")])])],1)],1)],1)},C=[],S=(s("4de4"),s("c975"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("b-container",{attrs:{fluid:""}},[s("b-row",[s("b-table",{attrs:{small:"",responsive:"",striped:"",fields:t.fields,items:t.shownData,"show-empty":""},scopedSlots:t._u([{key:"empty",fn:function(){return[s("h6",{staticClass:"p-5 text-center"},[t._v("No Students available at the moment!")])]},proxy:!0},{key:"cell(NO)",fn:function(e){return[s("p",{staticClass:"mb-0 px-2"},[t._v(t._s(e.index+1))])]}},{key:"cell(names)",fn:function(e){return[t._v(" "+t._s(e.item.firstname)+" "+t._s(e.item["last name"])+" ")]}},{key:"cell(suspend)",fn:function(e){return[s("loading-button",{staticClass:"px-3 small",attrs:{pill:"",size:"sm",variant:"active"==e.value?"outline-danger":"outline-success",loading:t.state.loadings[e.item.id],"loading-type":"dark","loading-bg":"light"},on:{click:function(s){return t.studentAction(e)}}},[t._v(" "+t._s("active"==e.value?"Suspend":"Activate")+" ")])]}}])})],1),s("b-row",{attrs:{"align-h":"center","align-v":"center"}},[t.totalPages>0?s("b-pagination-nav",{attrs:{"link-gen":t.linkGen,"number-of-pages":t.totalPages,"use-router":""}}):t._e()],1)],1)}),A=[],j={name:"admin-students-table",props:["students-data","total-pages"],data:function(){return{fields:["NO",{key:"names",label:"Names",sortable:!0},{key:"major",label:"Major",sortable:!1},{key:"suspend",label:"Action",sortable:!1,tdClass:"d-flex justify-content-center",thClass:"d-flex justify-content-center"}],state:{loadings:{}}}},computed:{shownData:function(){return this.studentsData}},methods:{studentAction:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function s(){var a,n,o,i,r,l;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return a=t.item,n=function(){return e.$set(e.state.loadings,a.id,!1)},e.$set(e.state.loadings,a.id,!0),s.prev=3,o="active"==a.suspend?"StudentSuspend":"StudentApprove",i={action:o,StudentId:a.id},s.next=8,e.axios.post("getStudents",i);case 8:r=s.sent,r.data,l=a,l.suspend="active"==l.suspend?"inactive":"active",e.$emit("data-edited",{data:l,done:n}),s.next=19;break;case 15:s.prev=15,s.t0=s["catch"](3),console.log(s.t0),n();case 19:case"end":return s.stop()}}),s,null,[[3,15]])})))()},linkGen:function(t){return{path:"/school/students/".concat(t)}}}},z=j,N=Object(u["a"])(z,S,A,!1,null,"1ba1aa21",null),$=N.exports,R={name:"admin-students",components:{studentsTable:$},data:function(){return{allStudents:null,state:{loadingStudents:!1,refreshing:!1,totalPages:0}}},watch:{page:function(){this.fetchStudents()}},computed:{studentsAvailable:function(){return!!this.allStudents&&!(this.allStudents.length&&this.allStudents.length<1)},page:function(){return this.$route.params.page}},mounted:function(){this.fetchStudents()},beforeMount:function(){this.$title("Students")},methods:{fetchStudents:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var s,a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.state.loadingStudents=!0,s={action:"getStudents",page:t.page},t.$set(t,"allStudents",[]),e.prev=3,e.next=6,t.axios.post("getStudents",s);case 6:a=e.sent,n=a.data,t.state.loadingStudents=!1,t.allStudents=n.data,t.state.totalPages=n.number_of_page,e.next=18;break;case 13:e.prev=13,e.t0=e["catch"](3),t.state.loadingStudents=!1,t.allStudents||(t.allStudents=[]),console.log(e.t0);case 18:case"end":return e.stop()}}),e,null,[[3,13]])})))()},updateStudentData:function(t){var e=t.data,s=t.done,a=this.allStudents.filter((function(t){return t.id==e.id}));this.$set(this.allStudents,this.allStudents.indexOf(a),e),s()},refresh:function(){this.state.loadingStudents||this.fetchStudents()}}},O=R,Q=Object(u["a"])(O,w,C,!1,null,"651d10ac",null),q=Q.exports,T=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("b-container",{staticClass:"admin-teacher p-5"},[s("b-row",{staticClass:"mb-2",attrs:{"no-gutters":"","align-h":"between","align-v":"center"}},[s("h2",{staticClass:"mb-0"},[t._v("Teachers")]),s("b-button",{attrs:{variant:"dark",disabled:t.state.loadingTeachers},on:{click:t.refresh}},[t._v(" Refresh ")])],1),s("hr",{staticClass:"mt-0 mb-0"}),s("b-row",{attrs:{"no-gutters":"","align-h":"center","align-v":"center"}},[s("transition",{attrs:{name:"group-fade",mode:"out-in"}},[t.state.loadingTeachers?s("div",{staticClass:"p-4 w-100 flex-center flex-column"},[s("app-loading",{attrs:{type:"dark"}}),s("h6",{staticClass:"mt-3"},[t._v("Loading Teachers")])],1):t.teachersAvailable?s("teachers-table",{attrs:{"teachers-data":t.allTeachers},on:{"data-edited":t.updateTeacherData}}):s("b-container",{staticClass:"bg-light",attrs:{fluid:""}},[s("h6",{staticClass:"text-center py-5"},[t._v("No Teachers available at the moment!")])])],1)],1)],1)},L=[],E=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("b-table",{attrs:{small:"",responsive:"",striped:"",fields:t.fields,items:t.shownData},scopedSlots:t._u([{key:"empty",fn:function(){return[s("h6",{staticClass:"p-5"},[t._v("No teachers available at the moment!")])]},proxy:!0},{key:"cell(NO)",fn:function(e){return[s("p",{staticClass:"mb-0 px-2"},[t._v(t._s(e.index+1))])]}},{key:"cell(names)",fn:function(e){return[t._v(" "+t._s(e.item.firstname)+" "+t._s(e.item["last name"])+" ")]}},{key:"cell(approved)",fn:function(e){return[s("loading-button",{staticClass:"px-3 small",attrs:{pill:"",size:"sm",variant:1==e.value?"outline-danger":"outline-success",loading:t.state.loadings[e.item.id],"loading-type":"dark","loading-bg":"light"},on:{click:function(s){return t.teacherAction(e)}}},[t._v(" "+t._s(1==e.value?"Suspend":"Activate")+" ")])]}}])})},M=[],D={name:"school-teacher-table",props:["teachers-data"],data:function(){return{fields:["NO",{key:"names",label:"Names",sortable:!0},{key:"subject",label:"Subject",sortable:!1},{key:"approved",label:"Action",sortable:!1,tdClass:"d-flex justify-content-center",thClass:"d-flex justify-content-center"}],state:{loadings:{}}}},computed:{shownData:function(){return console.log(this.teachersData),this.teachersData}},methods:{teacherAction:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function s(){var a,n,o,i,r,l,c;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return a=t.item,n=function(){return e.$set(e.state.loadings,a.id,!1)},e.$set(e.state.loadings,a.id,!0),s.prev=3,o=1==a.approved?"TeacherSuspend":"TeachersApprove",i={action:o,TeacherId:a.id},s.next=8,e.axios.post("getTeachers",i);case 8:r=s.sent,l=r.data,console.log(l),c=a,c.approved="0"==c.approved?"1":"0",e.$emit("data-edited",{data:c,done:n}),s.next=20;break;case 16:s.prev=16,s.t0=s["catch"](3),console.log(s.t0),n();case 20:case"end":return s.stop()}}),s,null,[[3,16]])})))()}}},B=D,I=Object(u["a"])(B,E,M,!1,null,"746fa4d6",null),P=I.exports,F={name:"admin-teacher",components:{teachersTable:P},data:function(){return{allTeachers:[],state:{loadingTeachers:!1}}},mounted:function(){this.fetchTeachers()},beforeMount:function(){this.$title("Teachers")},computed:{teachersAvailable:function(){return!!this.allTeachers&&!(this.allTeachers.length<1)},schoolID:function(){return this.$store.state.school.data.school}},methods:{fetchTeachers:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var s,a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.state.loadingTeachers=!0,s={action:"getTeachers",school:t.schoolID},e.prev=2,e.next=5,t.axios.post("schooTeacher",s);case 5:a=e.sent,n=a.data,t.state.loadingTeachers=!1,t.allTeachers=n,e.next=15;break;case 11:e.prev=11,e.t0=e["catch"](2),console.log(e.t0),t.state.loadingTeachers=!1;case 15:case"end":return e.stop()}}),e,null,[[2,11]])})))()},updateTeacherData:function(t){var e=t.data,s=t.done,a=this.allTeachers.filter((function(t){return t.id==e.id}));this.$set(this.allTeachers,this.allTeachers.indexOf(a),e),s()},refresh:function(){this.state.loadingTeachers||this.fetchTeachers()}}},U=F,H=Object(u["a"])(U,T,L,!1,null,"5ab3632b",null),V=H.exports,G=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("b-container",{staticClass:"school-notes p-5"},[s("b-row",{staticClass:"mb-2",attrs:{"no-gutters":"","align-h":"between","align-v":"center"}},[s("h2",{staticClass:"mb-0"},[t._v("Assignments")]),s("b-button",{attrs:{variant:"dark",disabled:t.state.loadingAssignments},on:{click:t.refresh}},[t._v(" Refresh ")])],1),s("hr",{staticClass:"mt-0 mb-4"}),t.state.refreshing?t._e():s("b-row",{attrs:{"no-gutters":"","align-h":"center","align-v":"center"}},[s("transition",{attrs:{name:"group-fade",mode:"out-in"}},[t.state.loadingAssignments?s("div",{staticClass:"p-4 w-100 flex-center flex-column"},[s("app-loading",{attrs:{type:"dark"}}),s("h6",{staticClass:"mt-3"},[t._v("Loading school assignments")])],1):t.assignmentsAvailable?s("assignments-table",{attrs:{"assignments-data":t.allAssignments},on:{"data-changed":t.fetchAssignments}}):s("b-row",{attrs:{"no-gutters":"","align-v":"center","align-h":"center"}},[s("h6",{staticClass:"text-center py-5"},[t._v(" No school assignments available at the moment! ")])])],1)],1)],1)},Y=[],J=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("b-container",{attrs:{fluid:""}},[s("b-row",[s("b-table",{attrs:{small:"",responsive:"",striped:"",fields:t.fields,items:t.shownData,"show-empty":""},scopedSlots:t._u([{key:"empty",fn:function(){return[s("h6",{staticClass:"p-5 text-center"},[t._v(" No Assignments available at the moment! ")])]},proxy:!0},{key:"cell(NO)",fn:function(e){return[s("p",{staticClass:"mb-0 px-2"},[t._v(t._s(e.index+1))])]}},{key:"cell(file)",fn:function(e){return[s("div",{staticClass:"d-flex flex-nowrap align-items-end"},[s("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal",value:"assignment-"+e.item.AssignmentId,expression:"'assignment-' + data.item.AssignmentId"}],staticClass:"px-2 mx-1",attrs:{size:"sm",variant:"dark"}},[t._v(" Preview ")]),s("b-button",{staticClass:"ml-1",attrs:{size:"sm",variant:"danger"},on:{click:function(s){return t.deleteItem(e.item)}}},[s("b-icon-trash-fill")],1),s("b-modal",{attrs:{id:"assignment-"+e.item.AssignmentId,"no-close-on-backdrop":"","no-close-on-esc":"","no-stacking":"","hide-footer":"",size:"xl","header-bg-variant":"dark","header-text-variant":"light","body-bg-variant":"light","body-class":"p-0",centered:"",lazy:""},scopedSlots:t._u([{key:"modal-title",fn:function(){return[s("p",{staticClass:"small m-0"},[t._v(t._s(e.item.title))])]},proxy:!0}],null,!0)},[s("iframe",{staticStyle:{"min-height":"80vh"},attrs:{src:"https://docs.google.com/gview?url="+e.value+"&embedded=true",frameborder:"0",width:"100%",height:"100%"}})])],1)]}}])})],1)],1)},W=[],Z={name:"school-assignments-table",props:["assignments-data"],data:function(){return{fields:["NO",{key:"title",label:"Title",sortable:!0},{key:"file",label:"Assignments",sortable:!1,tdClass:"d-flex justify-content-center",thClass:"d-flex justify-content-center"}],state:{loadings:{}}}},computed:{shownData:function(){return Array.isArray(this.assignmentsData)?this.assignmentsData:[]}},methods:{deleteItem:function(t){var e=this;this.$bvModal.msgBoxConfirm('Please confirm that you want to delete "'.concat(t.title,'".'),{title:"Please Confirm",size:"md",buttonSize:"sm",okVariant:"danger",okTitle:"YES, delete",cancelTitle:"Cancel",footerClass:"p-2",hideHeaderClose:!1,centered:!0}).then(function(){var s=Object(r["a"])(regeneratorRuntime.mark((function s(a){var n,o,i;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(!a){s.next=19;break}return e.$bvToast.show("delete-assignment-toast"),n={action:"deleteAssignments",AssignmentId:t.AssignmentId},s.prev=3,s.next=6,e.axios.post("deleteElements",n);case 6:o=s.sent,i=o.data,e.$bvToast.hide("delete-assignment-toast"),e.$emit("data-changed"),console.log(i),e.$notify({title:"SUCCESS",message:i.message||"File deleted successfully",status:"success"}),s.next=19;break;case 14:s.prev=14,s.t0=s["catch"](3),e.$bvToast.hide("delete-assignment-toast"),console.log(s.t0),e.$notify({title:"ERROR!",message:s.t0.errorMessage||"Failed to delete file.",status:"danger"});case 19:case"end":return s.stop()}}),s,null,[[3,14]])})));return function(t){return s.apply(this,arguments)}}()).catch((function(t){console.log(t),e.$notify({title:"ERROR!",message:"Oops, an error occured.",status:"danger"})}))}}},K=Z,X=Object(u["a"])(K,J,W,!1,null,"5c69b8de",null),tt=X.exports,et={name:"school-assignments",components:{assignmentsTable:tt},data:function(){return{allAssignments:null,state:{loadingAssignments:!1,refreshing:!1,totalPages:0}}},computed:{assignmentsAvailable:function(){return!!this.allAssignments&&!(this.allAssignments.length&&this.allAssignments.length<1)},schoolID:function(){return this.$store.state.school.data.school}},mounted:function(){this.fetchAssignments()},beforeMount:function(){this.$title("Assignments")},methods:{fetchAssignments:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var s,a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.state.loadingAssignments=!0,s={action:"getAssignmentAd",school:t.schoolID},t.$set(t,"allAssignments",[]),e.prev=3,e.next=6,t.axios.post("getSchoolItems",s);case 6:a=e.sent,n=a.data,t.state.loadingAssignments=!1,console.log(n),t.allAssignments=n,e.next=18;break;case 13:e.prev=13,e.t0=e["catch"](3),t.state.loadingAssignments=!1,t.allAssignments||(t.allAssignments=[]),console.log(e.t0);case 18:case"end":return e.stop()}}),e,null,[[3,13]])})))()},updateAssignmentData:function(t){var e=t.data,s=t.done,a=this.allAssignments.filter((function(t){return t.AssignmentId==e.AssignmentId}));this.$set(this.allAssignments,this.allAssignments.indexOf(a),e),s()},refresh:function(){this.state.loadingAssignments||this.fetchAssignments()}}},st=et,at=Object(u["a"])(st,G,Y,!1,null,"66cb7a19",null),nt=at.exports,ot=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("b-container",{staticClass:"school-notes p-5"},[s("b-row",{staticClass:"mb-2",attrs:{"no-gutters":"","align-h":"between","align-v":"center"}},[s("b-col",{attrs:{cols:"auto"}},[s("h2",{staticClass:"mb-0"},[t._v("School Notes")])]),s("b-col",{attrs:{cols:"auto"}},[s("b-button",{staticClass:"mx-1",attrs:{variant:"dark",disabled:t.state.loadingNotes},on:{click:t.openModal}},[t._v(" Add Note ")]),s("b-button",{staticClass:"ml-1",attrs:{variant:"dark",disabled:t.state.loadingNotes},on:{click:t.refresh}},[t._v(" Refresh ")])],1)],1),s("hr",{staticClass:"mt-0 mb-4"}),t.state.refreshing?t._e():s("b-row",{attrs:{"no-gutters":"","align-h":"center","align-v":"center"}},[s("transition",{attrs:{name:"group-fade",mode:"out-in"}},[t.state.loadingNotes?s("div",{staticClass:"p-4 w-100 flex-center flex-column"},[s("app-loading",{attrs:{type:"dark"}}),s("h6",{staticClass:"mt-3"},[t._v("Loading school notes")])],1):t.notesAvailable?s("notes-table",{attrs:{"notes-data":t.allNotes},on:{"data-changed":t.fetchNotes}}):s("b-row",{attrs:{"no-gutters":"","align-v":"center","align-h":"center"}},[s("h6",{staticClass:"text-center py-5"},[t._v(" No school notes available at the moment! ")])])],1)],1),s("add-notes",{on:{"file-uploaded":t.fetchNotes}})],1)},it=[],rt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("b-container",{attrs:{fluid:""}},[s("b-row",[s("b-table",{attrs:{small:"",responsive:"",striped:"",fields:t.fields,items:t.shownData,"show-empty":""},scopedSlots:t._u([{key:"empty",fn:function(){return[s("h6",{staticClass:"p-5 text-center"},[t._v("No Notes available at the moment!")])]},proxy:!0},{key:"cell(NO)",fn:function(e){return[s("p",{staticClass:"mb-0 px-2"},[t._v(t._s(e.index+1))])]}},{key:"cell(file)",fn:function(e){return[s("div",{staticClass:"d-flex flex-nowrap align-items-end"},[s("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal",value:"note-"+e.item.id,expression:"'note-' + data.item.id"}],staticClass:"px-2 mx-1",attrs:{size:"sm",variant:"dark"}},[t._v(" Preview ")]),s("b-button",{staticClass:"ml-1",attrs:{size:"sm",variant:"danger"},on:{click:function(s){return t.deleteItem(e.item)}}},[s("b-icon-trash-fill")],1),s("b-modal",{attrs:{id:"note-"+e.item.id,"no-close-on-backdrop":"","no-close-on-esc":"","no-stacking":"","hide-footer":"",size:"xl","header-bg-variant":"dark","header-text-variant":"light","body-bg-variant":"light","body-class":"p-0",centered:"",lazy:"",scrollable:""},scopedSlots:t._u([{key:"modal-title",fn:function(){return[s("p",{staticClass:"small m-0"},[t._v(t._s(e.item.title))])]},proxy:!0}],null,!0)},[s("iframe",{staticStyle:{"min-height":"80vh"},attrs:{src:"https://docs.google.com/gview?url="+e.value+"&embedded=true",frameborder:"0",width:"100%",height:"100%"}})])],1)]}}])})],1)],1)},lt=[],ct={name:"school-notes-table",props:["notes-data"],data:function(){return{fields:["NO",{key:"title",label:"Title",sortable:!0},{key:"subject",label:"Subject",sortable:!0},{key:"Date",label:"Date",sortable:!0},{key:"file",label:"Notes File",sortable:!1,tdClass:"d-flex justify-content-center",thClass:"d-flex justify-content-center"}],state:{loadings:{}}}},computed:{shownData:function(){return this.notesData}},methods:{deleteItem:function(t){var e=this;this.$bvModal.msgBoxConfirm('Please confirm that you want to delete "'.concat(t.title,'".'),{title:"Please Confirm",size:"md",buttonSize:"sm",okVariant:"danger",okTitle:"YES, delete",cancelTitle:"Cancel",footerClass:"p-2",hideHeaderClose:!1,centered:!0}).then(function(){var s=Object(r["a"])(regeneratorRuntime.mark((function s(a){var n,o,i;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(!a){s.next=19;break}return e.$bvToast.show("delete-note-toast"),n={action:"deleteSchoolNotes",schoolNotesId:t.id},s.prev=3,s.next=6,e.axios.post("deleteElements",n);case 6:o=s.sent,i=o.data,e.$bvToast.hide("delete-note-toast"),e.$emit("data-changed"),console.log(i),e.$notify({title:"SUCCESS",message:i.message||"File deleted successfully",status:"success"}),s.next=19;break;case 14:s.prev=14,s.t0=s["catch"](3),e.$bvToast.hide("delete-note-toast"),console.log(s.t0),e.$notify({title:"ERROR!",message:s.t0.errorMessage||"Failed to delete file.",status:"danger"});case 19:case"end":return s.stop()}}),s,null,[[3,14]])})));return function(t){return s.apply(this,arguments)}}()).catch((function(t){console.log(t),e.$notify({title:"ERROR!",message:"Oops, an error occured.",status:"danger"})}))}}},ut=ct,dt=Object(u["a"])(ut,rt,lt,!1,null,"72e18aaa",null),mt=dt.exports,ht=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("b-modal",{attrs:{id:"add-notes-modal",title:"Add Note","body-class":"pb-0"},scopedSlots:t._u([{key:"modal-footer",fn:function(){return[s("b-row",{attrs:{"no-gutters":"","align-v":"center","align-h":"end"}},[s("b-button",{staticClass:"px-3 mx-1",attrs:{variant:"dark"},on:{click:t.clearModal}},[t._v(" cancel ")]),s("b-button",{staticClass:"text-light px-2 ml-2",attrs:{variant:"primary",disabled:t.state.addingNote},on:{click:t.submitForm}},[s("transition-group",{attrs:{name:"group-fade"}},[t.state.addingNote?s("span",{key:"loading"},[s("AppLoading",{attrs:{size:"xs"}})],1):s("span",{key:"text"},[t._v("Add Note")])])],1)],1)]},proxy:!0}])},[s("b-form",{ref:"addNoteForm",on:{submit:function(e){return e.preventDefault(),t.addNote(e)}}},[s("b-form-group",{staticClass:"mb-4",attrs:{label:"Note Title","label-class":"h6"}},[s("b-form-input",{attrs:{trim:"",required:""},model:{value:t.noteTitle,callback:function(e){t.noteTitle=e},expression:"noteTitle"}})],1),s("b-form-group",{staticClass:"mb-4",attrs:{label:"Subject","label-class":"h6"},scopedSlots:t._u([{key:"label",fn:function(){return[s("b-container",{attrs:{fluid:""}},[s("b-row",{attrs:{"align-v":"end"}},[s("b-col",{staticClass:"p-0",attrs:{cols:"auto"}},[s("p",{staticClass:"h6 p-0 col-form-label mb-0"},[t._v("Subject")])]),s("b-col",[s("b-button",{attrs:{size:"sm",variant:"light",pill:"",disabled:t.state.loadingSubjects},on:{click:t.fetchSubjects}},[s("b-icon-arrow-repeat",{attrs:{icon:"arrow-repeat",animation:t.state.loadingSubjects?"spin":"none","font-scale":"1.25"}})],1)],1)],1)],1)]},proxy:!0}])},[s("b-form-select",{attrs:{disabled:!t.subjectsAvailable,required:""},scopedSlots:t._u([{key:"first",fn:function(){return[s("b-form-select-option",{attrs:{value:"",disabled:""}},[t._v(" Select Subject ")]),t._l(t.subjects,(function(e){return s("b-form-select-option",{key:e.id,attrs:{value:e}},[t._v(" "+t._s(e.title)+" ")])}))]},proxy:!0}]),model:{value:t.subject,callback:function(e){t.subject=e},expression:"subject"}})],1),s("b-form-group",{staticClass:"mb-4",scopedSlots:t._u([{key:"label",fn:function(){return[s("b-container",{attrs:{fluid:""}},[s("b-row",{attrs:{"align-v":"end"}},[s("b-col",{staticClass:"p-0",attrs:{cols:"auto"}},[s("p",{staticClass:"h6 p-0 col-form-label mb-0"},[t._v("Level")])]),s("b-col",[s("b-button",{attrs:{size:"sm",variant:"light",pill:"",disabled:t.state.loadingLevels},on:{click:t.fetchLevels}},[s("b-icon-arrow-repeat",{attrs:{icon:"arrow-repeat",animation:t.state.loadingLevels?"spin":"none","font-scale":"1.25"}})],1)],1)],1)],1)]},proxy:!0}])},[s("b-form-select",{attrs:{disabled:!t.levelsAvailable,required:""},scopedSlots:t._u([{key:"first",fn:function(){return[s("b-form-select-option",{attrs:{value:"",disabled:""}},[t._v(" Select Level ")]),t._l(t.levels,(function(e){return s("b-form-select-option",{key:e.id,attrs:{value:e}},[t._v(" "+t._s(e.title)+" ")])}))]},proxy:!0}]),model:{value:t.level,callback:function(e){t.level=e},expression:"level"}})],1),s("b-form-group",{attrs:{label:"Note File"}},[s("b-form-file",{attrs:{placeholder:"Choose a file or drop it here...","drop-placeholder":"Drop file here...",accept:".docx, .pdf, .ppt",required:""},model:{value:t.file,callback:function(e){t.file=e},expression:"file"}})],1),s("b-form-group",{staticClass:"mb-0 px-1"},[s("b-button",{ref:"addNoteBtn",staticClass:"d-none",attrs:{type:"submit"}})],1)],1)],1)},bt=[],ft={name:"add-note-modal",data:function(){return{state:{addingNote:!1,loadingSubjects:!1,loadingLevels:!1},noteTitle:"",subject:"",subjects:[],level:"",levels:[],file:null}},computed:{subjectsAvailable:function(){return!!(Array.isArray(this.subjects)&&this.subjects.length>0)},levelsAvailable:function(){return!!(Array.isArray(this.levels)&&this.levels.length>0)},user:function(){return this.$store.state.school.data}},mounted:function(){this.fetchSubjects(),this.fetchLevels()},methods:{addNote:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var s,a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.state.addingNote=!0,s=new FormData,s.append("title",t.noteTitle),s.append("subject",t.subject.id),s.append("level",t.level.id),s.append("userId",t.user.user_id),s.append("school",t.user.school),s.append("file",t.file),e.prev=8,e.next=11,t.axios.post("insertSnotes",s);case 11:a=e.sent,n=a.data,t.state.addingNote=!1,n.image?(t.clearModal(),t.$emit("file-uploaded"),t.$notify({title:"SUCCESS!",message:n.message||"Note added successfully.",status:"success"})):t.$notify({title:"ERROR!",message:n.message||"Something went wrong while adding note.",status:"danger"}),e.next=22;break;case 17:e.prev=17,e.t0=e["catch"](8),t.state.addingNote=!1,console.log(e.t0),t.$notify({title:"ERROR!",message:"Failed to add note! try agin later.",status:"danger"});case 22:case"end":return e.stop()}}),e,null,[[8,17]])})))()},submitForm:function(){this.$refs["addNoteBtn"].click()},fetchSubjects:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var s,a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.state.loadingSubjects=!0,s={action:"getSubjects"},e.prev=2,e.next=5,t.axios.post("getElements",s);case 5:a=e.sent,n=a.data,t.subjects=n,console.log(n),e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](2),console.log(e.t0);case 14:t.state.loadingSubjects=!1;case 15:case"end":return e.stop()}}),e,null,[[2,11]])})))()},fetchLevels:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var s,a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.state.loadingLevels=!0,s={action:"getLevels"},e.prev=2,e.next=5,t.axios.post("getElements",s);case 5:a=e.sent,n=a.data,t.levels=n,console.log(n),e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](2),console.log(e.t0);case 14:t.state.loadingLevels=!1;case 15:case"end":return e.stop()}}),e,null,[[2,11]])})))()},clearModal:function(){this.$bvModal.hide("add-notes-modal"),this.state.addingNote=!1,this.state.loadingSubjects=!1,this.state.loadingLevels=!1,this.noteTitle="",this.subject="",this.subjects=[],this.level="",this.levels=[],this.file=null}}},gt=ft,pt=Object(u["a"])(gt,ht,bt,!1,null,null,null),vt=pt.exports,xt={name:"school-notes",components:{notesTable:mt,AddNotes:vt},data:function(){return{allNotes:null,state:{loadingNotes:!1,refreshing:!1,totalPages:0}}},computed:{notesAvailable:function(){return!!this.allNotes&&!(this.allNotes.length&&this.allNotes.length<1)}},mounted:function(){this.fetchNotes()},beforeMount:function(){this.$title("Notes")},methods:{fetchNotes:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var s,a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.state.loadingNotes=!0,s={action:"schoolNotes"},t.$set(t,"allNotes",[]),e.prev=3,e.next=6,t.axios.post("schoolItems",s);case 6:a=e.sent,n=a.data,t.state.loadingNotes=!1,t.allNotes=n,e.next=17;break;case 12:e.prev=12,e.t0=e["catch"](3),t.state.loadingNotes=!1,t.allNotes||(t.allNotes=[]),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[3,12]])})))()},updateNoteData:function(t){var e=t.data,s=t.done,a=this.allNotes.filter((function(t){return t.id==e.id}));this.$set(this.allNotes,this.allNotes.indexOf(a),e),s()},refresh:function(){this.state.loadingNotes||this.fetchNotes()},openModal:function(){this.$bvModal.show("add-notes-modal")},hideModal:function(){this.$bvModal.hide("add-notes-modal")}}},kt=xt,yt=Object(u["a"])(kt,ot,it,!1,null,"ded5804a",null),_t=yt.exports,wt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("b-container",{staticClass:"school-books p-5"},[s("b-row",{staticClass:"mb-2",attrs:{"no-gutters":"","align-h":"between","align-v":"center"}},[s("b-col",{attrs:{cols:"auto"}},[s("h2",{staticClass:"mb-0"},[t._v("Books")])]),s("b-col",{attrs:{cols:"auto"}},[s("b-button",{staticClass:"ml-1",attrs:{variant:"dark",disabled:t.state.loadingBooks},on:{click:t.refresh}},[t._v(" Refresh ")])],1)],1),s("hr",{staticClass:"mt-0 mb-0"}),t.state.refreshing?t._e():s("b-row",{attrs:{"no-gutters":"","align-h":"center","align-v":"center"}},[s("transition",{attrs:{name:"group-fade",mode:"out-in"}},[t.state.loadingBooks?s("div",{staticClass:"py-5 w-100 flex-center flex-column"},[s("app-loading",{attrs:{type:"dark"}}),s("h6",{staticClass:"mt-3"},[t._v("Loading Books")])],1):t.booksAvailable?s("books-table",{attrs:{"books-data":t.allBooks}}):s("b-row",{attrs:{"no-gutters":"","align-v":"center","align-h":"center"}},[s("h6",{staticClass:"text-center py-5"},[t._v("No Books available at the moment!")])])],1)],1)],1)},Ct=[],St=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("b-table",{attrs:{small:"",responsive:"",striped:"",fields:t.fields,items:t.shownData},scopedSlots:t._u([{key:"cell(NO)",fn:function(e){return[s("p",{staticClass:"mb-0 px-2"},[t._v(t._s(e.index+1))])]}},{key:"cell(title)",fn:function(e){return[t._v(" "+t._s(e.value)+" ")]}},{key:"cell(file)",fn:function(e){return[s("div",[s("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal",value:"book-"+e.item.id,expression:"'book-' + data.item.id"}],staticClass:"px-3",attrs:{size:"sm",variant:"dark"}},[t._v(" Preview ")]),s("b-modal",{attrs:{id:"book-"+e.item.id,"no-close-on-backdrop":"","no-close-on-esc":"","no-stacking":"","hide-footer":"",size:"xl","header-bg-variant":"dark","header-text-variant":"light","body-bg-variant":"light","body-class":"p-0",centered:"",lazy:""},scopedSlots:t._u([{key:"modal-title",fn:function(){return[s("p",{staticClass:"small m-0"},[t._v(t._s(e.item.title))])]},proxy:!0}],null,!0)},[s("iframe",{staticStyle:{"min-height":"80vh"},attrs:{src:"https://docs.google.com/gview?url="+e.value+"&embedded=true",frameborder:"0",width:"100%",height:"100%"}})])],1)]}}])})},At=[],jt={name:"admin-books-table",props:["books-data"],data:function(){return{fields:["NO",{key:"title",label:"Title",sortable:!0,tdClass:"truncate-holder pr-3"},{key:"subject",label:"Subject",sortable:!1},{key:"Date",label:"Date",sortable:!1,tdClass:"text-center",thClass:"text-center"},{key:"file",label:"File",sortable:!1,tdClass:"text-center",thClass:"text-center"}],state:{loadings:{}}}},computed:{shownData:function(){return this.booksData}}},zt=jt,Nt=(s("76e2"),Object(u["a"])(zt,St,At,!1,null,null,null)),$t=Nt.exports,Rt={name:"school-books",components:{booksTable:$t},data:function(){return{allBooks:null,state:{loadingBooks:!1}}},computed:{booksAvailable:function(){return!!this.allBooks&&!(this.allBooks.length&&this.allBooks.length<1)}},mounted:function(){this.fetchBooks()},beforeMount:function(){this.$title("Books")},methods:{fetchBooks:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var s,a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.state.loadingBooks=!0,s={action:"getBooks"},e.prev=2,e.next=5,t.axios.post("getItems",s);case 5:a=e.sent,n=a.data,t.state.loadingBooks=!1,t.allBooks=n,console.log(n),e.next=16;break;case 12:e.prev=12,e.t0=e["catch"](2),t.state.loadingBooks=!1,console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[2,12]])})))()},refresh:function(){this.state.loadingBooks||this.fetchBooks()}}},Ot=Rt,Qt=Object(u["a"])(Ot,wt,Ct,!1,null,"e08dbb1a",null),qt=Qt.exports,Tt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("b-container",{staticClass:"px-3 py-4"},[s("b-row",{staticClass:"mb-3",attrs:{"no-gutters":""}},[s("b-col",{staticClass:"mb-4",attrs:{cols:"12"}},[s("b-row",{attrs:{"no-gutters":"","align-v":"center","align-h":"between"}},[s("b-col",{attrs:{cols:"auto"}},[s("b-button",{attrs:{variant:"dark"},on:{click:function(e){return t.$router.back()}}},[t._v("Back")])],1),s("b-col",[s("b-row",{attrs:{"no-gutters":"","align-v":"center","align-h":"end"}},[s("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal",value:"add-question-modal",expression:"'add-question-modal'"}],staticClass:"mr-1",attrs:{variant:"dark"}},[t._v("Add Question")]),s("b-button",{staticClass:"ml-1",attrs:{variant:"dark",disabled:t.state.loadingQuestions},on:{click:t.refresh}},[t._v("Refresh")])],1)],1)],1)],1),s("b-col",[s("p",[s("span",{staticClass:"h5"},[t._v("Quiz:")]),s("span",{staticClass:"d-inline text-reset"},[t._v(" "+t._s(t.quiz.title)+" ")])])])],1),s("b-row",{staticClass:"bg-light",attrs:{"no-gutters":"","align-h":"center","align-v":"center"}},[s("transition",{attrs:{name:"group-fade",mode:"out-in"}},[t.state.loadingQuestions?s("div",{staticClass:"py-5 w-100 flex-center flex-column"},[s("div",{staticClass:"position-relative"},[s("app-loading",{attrs:{type:"dark"}})],1),s("h6",{staticClass:"mt-3"},[t._v("Loading Questions")])]):t.hasNoQuestion?s("div",{staticClass:"px-4 py-5"},[s("h6",[t._v(" This quiz has no questions, click "),s("b-badge",{staticClass:"pt-2 pb-2 mx-2"},[t._v("Add question")]),t._v(" to add them. ")],1)]):s("b-container",{attrs:{fluid:""}},[s("div",{staticClass:"questions"},t._l(t.allQuestions,(function(e){return s("p",{key:e.id,staticClass:"question"},[t._v(" "+t._s(e.title)+" ")])})),0)])],1)],1),s("b-modal",{attrs:{id:"add-question-modal",title:"Add a Question","body-class":"pb-0"},scopedSlots:t._u([{key:"modal-footer",fn:function(e){var a=e.cancel;return[s("b-row",{attrs:{"no-gutters":"","align-v":"center","align-h":"end"}},[s("b-button",{staticClass:"px-3 mx-1",attrs:{variant:"dark"},on:{click:function(t){return a()}}},[t._v(" cancel ")]),s("b-button",{staticClass:"text-light px-2 ml-2",attrs:{variant:"primary",disabled:t.state.addingQuestion},on:{click:t.submitForm}},[s("transition-group",{attrs:{name:"group-fade"}},[t.state.addingQuestion?s("span",{key:"loading"},[s("AppLoading",{attrs:{size:"xs"}})],1):s("span",{key:"text"},[t._v("Add question")])])],1)],1)]}}])},[s("b-form",{ref:"addQuestionForm",on:{submit:function(e){return e.preventDefault(),t.addQuestion(e)}}},[s("b-form-group",{staticClass:"mb-4",attrs:{label:"Question Title","label-class":"h6"}},[s("b-textarea",{attrs:{required:""},model:{value:t.questionTitle,callback:function(e){t.questionTitle=e},expression:"questionTitle"}})],1),s("b-form-group",{staticClass:"mb-0 px-1",scopedSlots:t._u([{key:"label",fn:function(){return[s("b-row",{staticClass:"mb-3",attrs:{"no-gutters":"","align-h":"between","align-v":"end"}},[s("b-col",[s("legend",{staticClass:"h6 mb-0"},[t._v("Options")])]),s("b-col",{attrs:{cols:"auto"}},[s("b-icon-plus-square",{staticClass:"cursor-pointer",attrs:{scale:"1.5"},on:{click:t.addOption}})],1)],1)]},proxy:!0}])},[s("b-form-radio-group",{attrs:{required:""},model:{value:t.correctOption,callback:function(e){t.correctOption=e},expression:"correctOption"}},t._l(t.options,(function(e,a){return s("b-form-radio",{key:a,staticClass:"w-100 custom-option my-1",attrs:{value:e.value},on:{change:function(e){return t.optionsChanged(a)}}},[s("b-input-group",[s("b-input",{staticClass:"border-0 no-shadow custom-option-input",attrs:{placeholder:"Enter option"},model:{value:e.text,callback:function(s){t.$set(e,"text",s)},expression:"option.text"}}),s("b-input-group-prepend",[s("b-icon-x-circle",{staticClass:"ml-3 cursor-pointer",attrs:{scale:"1.25"},on:{click:function(e){return t.removeOption(a)}}})],1)],1)],1)})),1),s("b-button",{ref:"addQuestionBtn",staticClass:"d-none",attrs:{type:"submit"}})],1)],1)],1)],1)},Lt=[],Et=(s("d81d"),{name:"school-individual-quiz",data:function(){return{state:{loadingQuestions:!1,addingQuestion:!1},options:[{text:"",value:"on"}],correctOption:"on",questionTitle:"",allQuestions:[]}},computed:{hasNoQuestion:function(){return this.allQuestions.length<1},quizId:function(){return this.$route.params.id},allQuizes:function(){return this.$store.state.school.quizes},quiz:function(){var t=this;return this.allQuizes.filter((function(e){return e.id==t.quizId}))[0]},user:function(){return this.$store.state.school.data}},mounted:function(){console.log(this.quiz),this.fetchQuestions()},methods:{fetchQuestions:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var s,a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.state.loadingQuestions=!0,s={action:"getQuestion",quizid:t.quizId},e.prev=2,e.next=5,t.axios.post("getQuestion",s);case 5:a=e.sent,n=a.data,t.allQuestions=n,console.log(n),t.state.loadingQuestions=!1,e.next=16;break;case 12:e.prev=12,e.t0=e["catch"](2),console.log(e.t0),t.state.loadingQuestions=!1;case 16:case"end":return e.stop()}}),e,null,[[2,12]])})))()},addQuestion:function(){var t=this;console.log("adding Question...."),this.state.addingQuestion=!0;var e=function(t,e){return{optionTitle:t.text,isCorrect:t.value}},s={action:"addQuestion",quizId:this.quizId,question:{file:"xxx",questionTitle:this.questionTitle,questionOptions:this.options.map(e)}};this.axios.post("insertQuestion",s).then((function(e){t.state.addingQuestion=!1,e.data&&e.data.message?(t.$notify({title:"SUCCESS!",message:e.data.message,status:"success"}),t.$bvModal.hide("add-question-modal"),t.fetchQuestions()):t.$notify({title:"ERROR!",message:"Something went wrong!",status:"danger"}),console.log(e)})).catch((function(e){t.state.addingQuestion=!1,e&&e.errorMessage&&t.$notify({title:"ERROR!",message:e.errorMessage,status:"danger"}),console.log(e)})),console.log(s)},submitForm:function(){this.$refs["addQuestionBtn"].click()},addOption:function(){this.options.push({text:"",value:"incorrect"})},removeOption:function(t){this.options.length<=1||this.$delete(this.options,t)},optionsChanged:function(t){var e=this,s=function(e,s){return e.value=t==s?"on":"incorrect",e};this.$set(this,"options",this.options.map(s)),this.$nextTick((function(){e.correctOption="on",console.log(e.options)}))},refresh:function(){0==this.state.loadingQuestions&&this.fetchQuestions()}}}),Mt=Et,Dt=(s("72d8"),Object(u["a"])(Mt,Tt,Lt,!1,null,null,null)),Bt=Dt.exports,It=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("b-container",{staticClass:"school-quizes p-5"},[s("b-row",{staticClass:"mb-2",attrs:{"no-gutters":"","align-h":"between","align-v":"center"}},[s("b-col",{attrs:{cols:"auto"}},[s("h2",{staticClass:"mb-0"},[t._v("Quizes")])]),s("b-col",{attrs:{cols:"auto"}},[s("b-button",{staticClass:"mx-1",attrs:{variant:"dark",disabled:t.state.loadingQuizes},on:{click:t.openModal}},[t._v(" Add quiz ")]),s("b-button",{staticClass:"ml-1",attrs:{variant:"dark",disabled:t.state.loadingQuizes},on:{click:t.refresh}},[t._v(" Refresh ")])],1)],1),s("hr",{staticClass:"mt-0 mb-0"}),t.state.refreshing?t._e():s("b-row",{attrs:{"no-gutters":"","align-h":"center","align-v":"center"}},[s("transition",{attrs:{name:"group-fade",mode:"out-in"}},[t.state.loadingQuizes?s("div",{staticClass:"py-5 w-100 flex-center flex-column"},[s("app-loading",{attrs:{type:"dark"}}),s("h6",{staticClass:"mt-3"},[t._v("Loading Quizes")])],1):t.quizesAvailable?s("quizes-table",{attrs:{"quizes-data":t.allQuizes}}):s("b-row",{attrs:{"no-gutters":"","align-v":"center","align-h":"center"}},[s("h6",{staticClass:"text-center py-5"},[t._v("No Quizes available at the moment!")])])],1)],1),s("add-quiz",{on:{"quiz-added":t.fetchQuizes}})],1)},Pt=[],Ft=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("b-modal",{attrs:{id:"school-add-quiz-modal",title:"Add Quiz","body-class":"pb-0"},scopedSlots:t._u([{key:"modal-footer",fn:function(){return[s("b-row",{attrs:{"no-gutters":"","align-v":"center","align-h":"end"}},[s("b-button",{staticClass:"px-3 mx-1",attrs:{variant:"dark"},on:{click:t.clearModal}},[t._v(" cancel ")]),s("b-button",{staticClass:"text-light px-2 ml-2",attrs:{variant:"primary",disabled:t.state.addingQuiz},on:{click:t.submitForm}},[s("transition-group",{attrs:{name:"group-fade"}},[t.state.addingQuiz?s("span",{key:"loading"},[s("AppLoading",{attrs:{size:"xs"}})],1):s("span",{key:"text"},[t._v("Add Quiz")])])],1)],1)]},proxy:!0}])},[s("b-form",{ref:"addQuizForm",on:{submit:function(e){return e.preventDefault(),t.addQuiz(e)}}},[s("b-form-group",{staticClass:"mb-4",attrs:{label:"Quiz Title","label-class":"h6"}},[s("b-form-input",{attrs:{trim:"",required:""},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}})],1),s("b-form-group",{staticClass:"mb-4",attrs:{label:"Subject","label-class":"h6"},scopedSlots:t._u([{key:"label",fn:function(){return[s("b-container",{attrs:{fluid:""}},[s("b-row",{attrs:{"align-v":"end"}},[s("b-col",{staticClass:"p-0",attrs:{cols:"auto"}},[s("p",{staticClass:"h6 p-0 col-form-label mb-0"},[t._v("Subject")])]),s("b-col",[s("b-button",{attrs:{size:"sm",variant:"light",pill:"",disabled:t.state.loadingSubjects},on:{click:t.fetchSubjects}},[s("b-icon-arrow-repeat",{attrs:{icon:"arrow-repeat",animation:t.state.loadingSubjects?"spin":"none","font-scale":"1.25"}})],1)],1)],1)],1)]},proxy:!0}])},[s("b-form-select",{attrs:{disabled:!t.subjectsAvailable,required:""},scopedSlots:t._u([{key:"first",fn:function(){return[s("b-form-select-option",{attrs:{value:"",disabled:""}},[t._v(" Select Subject ")]),t._l(t.subjects,(function(e){return s("b-form-select-option",{key:e.id,attrs:{value:e}},[t._v(" "+t._s(e.title)+" ")])}))]},proxy:!0}]),model:{value:t.subject,callback:function(e){t.subject=e},expression:"subject"}})],1),s("b-form-group",{staticClass:"mb-4",scopedSlots:t._u([{key:"label",fn:function(){return[s("b-container",{attrs:{fluid:""}},[s("b-row",{attrs:{"align-v":"end"}},[s("b-col",{staticClass:"p-0",attrs:{cols:"auto"}},[s("p",{staticClass:"h6 p-0 col-form-label mb-0"},[t._v("Level")])]),s("b-col",[s("b-button",{attrs:{size:"sm",variant:"light",pill:"",disabled:t.state.loadingLevels},on:{click:t.fetchLevels}},[s("b-icon-arrow-repeat",{attrs:{icon:"arrow-repeat",animation:t.state.loadingLevels?"spin":"none","font-scale":"1.25"}})],1)],1)],1)],1)]},proxy:!0}])},[s("b-form-select",{attrs:{disabled:!t.levelsAvailable,required:""},scopedSlots:t._u([{key:"first",fn:function(){return[s("b-form-select-option",{attrs:{value:"",disabled:""}},[t._v(" Select Level ")]),t._l(t.levels,(function(e){return s("b-form-select-option",{key:e.id,attrs:{value:e}},[t._v(" "+t._s(e.title)+" ")])}))]},proxy:!0}]),model:{value:t.level,callback:function(e){t.level=e},expression:"level"}})],1),s("b-form-group",{staticClass:"mb-0 px-1"},[s("b-button",{ref:"addQuizBtn",staticClass:"d-none",attrs:{type:"submit"}})],1)],1)],1)},Ut=[],Ht={name:"school-add-quiz-modal",data:function(){return{state:{addingQuiz:!1,loadingSubjects:!1,loadingLevels:!1},title:"",subject:"",subjects:[],level:"",levels:[]}},computed:{subjectsAvailable:function(){return!!(Array.isArray(this.subjects)&&this.subjects.length>0)},levelsAvailable:function(){return!!(Array.isArray(this.levels)&&this.levels.length>0)},user:function(){return this.$store.state.school.data}},mounted:function(){this.fetchSubjects(),this.fetchLevels()},methods:{addQuiz:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var s,a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.state.addingQuiz=!0,s={action:"addQuiz",title:t.title,level:t.level.id,subject:t.subject.id,userId:t.user.user_id,school:t.user.school},e.prev=2,e.next=5,t.axios.post("insertQuiz",s);case 5:a=e.sent,n=a.data,t.state.addingQuiz=!1,n?(t.clearModal(),t.$emit("quiz-added"),t.$notify({title:"SUCCESS!",message:n.message||"Quiz added successfully.",status:"success"})):t.$notify({title:"ERROR!",message:n.message||"Something went wrong while adding Quiz.",status:"danger"}),e.next=16;break;case 11:e.prev=11,e.t0=e["catch"](2),t.state.addingQuiz=!1,console.log(e.t0),t.$notify({title:"ERROR!",message:"Failed to add Quiz! try agin later.",status:"danger"});case 16:case"end":return e.stop()}}),e,null,[[2,11]])})))()},submitForm:function(){this.$refs["addQuizBtn"].click()},fetchSubjects:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var s,a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.state.loadingSubjects=!0,s={action:"getSubjects"},e.prev=2,e.next=5,t.axios.post("getElements",s);case 5:a=e.sent,n=a.data,t.subjects=n,console.log(n),e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](2),console.log(e.t0);case 14:t.state.loadingSubjects=!1;case 15:case"end":return e.stop()}}),e,null,[[2,11]])})))()},fetchLevels:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var s,a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.state.loadingLevels=!0,s={action:"getLevels"},e.prev=2,e.next=5,t.axios.post("getElements",s);case 5:a=e.sent,n=a.data,t.levels=n,console.log(n),e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](2),console.log(e.t0);case 14:t.state.loadingLevels=!1;case 15:case"end":return e.stop()}}),e,null,[[2,11]])})))()},clearModal:function(){this.$bvModal.hide("school-add-quiz-modal"),this.state.addingQuiz=!1,this.state.loadingSubjects=!1,this.state.loadingLevels=!1,this.title="",this.subject="",this.subjects=[],this.level="",this.levels=[]}}},Vt=Ht,Gt=Object(u["a"])(Vt,Ft,Ut,!1,null,null,null),Yt=Gt.exports,Jt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("b-table",{attrs:{small:"",responsive:"",striped:"",fields:t.fields,items:t.shownData},scopedSlots:t._u([{key:"cell(NO)",fn:function(e){return[s("p",{staticClass:"mb-0 px-2"},[t._v(t._s(e.index+1))])]}},{key:"cell(Action)",fn:function(e){return[s("b-button",{staticClass:"text-light mx-2 ",attrs:{variant:"primary",to:"/school/quiz/"+e.item.id,size:"sm"}},[t._v(" View ")])]}},{key:"cell(title)",fn:function(e){return[t._v(" "+t._s(e.value)+" ")]}}])})},Wt=[],Zt={name:"school-quizes-table",props:["quizes-data"],data:function(){return{fields:["NO",{key:"title",label:"Title",sortable:!0,tdClass:"truncate-holder pr-3"},{key:"subject",label:"Subject",sortable:!1},{key:"Date",label:"Date",sortable:!1,tdClass:"text-center",thClass:"text-center"},"Action"],state:{loadings:{}}}},computed:{shownData:function(){return this.quizesData}}},Kt=Zt,Xt=(s("b6e8"),Object(u["a"])(Kt,Jt,Wt,!1,null,null,null)),te=Xt.exports,ee={name:"school-quizes",components:{quizesTable:te,AddQuiz:Yt},data:function(){return{state:{loadingQuizes:!1}}},computed:{quizesAvailable:function(){return!!this.allQuizes&&!(this.allQuizes.length&&this.allQuizes.length<1)},allQuizes:function(){return this.$store.state.school.quizes},user:function(){return this.$store.state.school.data}},mounted:function(){this.fetchQuizes()},beforeMount:function(){this.$title("Quizes")},methods:{fetchQuizes:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var s,a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.state.loadingQuizes=!0,s={action:"getQuiz",school:t.user.school},e.prev=2,e.next=5,t.axios.post("getQuiz",s);case 5:a=e.sent,n=a.data,t.state.loadingQuizes=!1,t.$store.dispatch("school/SET_SCHOOL_QUIZ",n),e.next=15;break;case 11:e.prev=11,e.t0=e["catch"](2),t.state.loadingQuizes=!1,console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[2,11]])})))()},refresh:function(){this.state.loadingQuizes||this.fetchQuizes()},openModal:function(){this.$bvModal.show("school-add-quiz-modal")},hideModal:function(){this.$bvModal.hide("school-add-quiz-modal")}}},se=ee,ae=Object(u["a"])(se,It,Pt,!1,null,"661f4be6",null),ne=ae.exports,oe=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("b-container",{staticClass:"school-summaries p-5"},[s("b-row",{staticClass:"mb-2",attrs:{"no-gutters":"","align-h":"between","align-v":"center"}},[s("b-col",{attrs:{cols:"auto"}},[s("h2",{staticClass:"mb-0"},[t._v("Summaries")])]),s("b-col",{attrs:{cols:"auto"}},[s("b-button",{staticClass:"ml-1",attrs:{variant:"dark",disabled:t.state.loadingSummary},on:{click:t.refresh}},[t._v(" Refresh ")])],1)],1),s("hr",{staticClass:"mt-0 mb-0"}),t.state.refreshing?t._e():s("b-row",{attrs:{"no-gutters":"","align-h":"center","align-v":"center"}},[s("transition",{attrs:{name:"group-fade",mode:"out-in"}},[t.state.loadingSummaries?s("div",{staticClass:"p-4 w-100 flex-center flex-column"},[s("app-loading",{attrs:{type:"dark"}}),s("h6",{staticClass:"mt-3"},[t._v("Loading Summaries")])],1):t.summariesAvailable?s("summaries-table",{attrs:{"summaries-data":t.allSummaries},on:{"data-changed":t.fetchSummaries}}):s("b-row",{attrs:{"no-gutters":"","align-v":"center","align-h":"center"}},[s("h6",{staticClass:"text-center py-5"},[t._v(" No Summaries available at the moment! ")])])],1)],1)],1)},ie=[],re=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("b-table",{attrs:{small:"",responsive:"",striped:"",fields:t.fields,items:t.shownData},scopedSlots:t._u([{key:"cell(NO)",fn:function(e){return[s("p",{staticClass:"mb-0 px-2"},[t._v(t._s(e.index+1))])]}},{key:"cell(title)",fn:function(e){return[t._v(" "+t._s(e.value)+" ")]}},{key:"cell(file)",fn:function(e){return[s("div",{staticClass:"d-flex flex-nowrap align-items-end"},[s("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal",value:"summary-"+e.item.id,expression:"'summary-' + data.item.id"}],staticClass:"px-2 mx-1",attrs:{size:"sm",variant:"dark"}},[t._v(" Preview ")]),s("b-button",{staticClass:"ml-1",attrs:{size:"sm",variant:"danger"},on:{click:function(s){return t.deleteItem(e.item)}}},[s("b-icon-trash-fill")],1),s("b-modal",{attrs:{id:"summary-"+e.item.id,"no-close-on-backdrop":"","no-close-on-esc":"","no-stacking":"","hide-footer":"",size:"xl","header-bg-variant":"dark","header-text-variant":"light","body-bg-variant":"light","body-class":"p-0",centered:"",lazy:""},scopedSlots:t._u([{key:"modal-title",fn:function(){return[s("p",{staticClass:"small m-0"},[t._v(t._s(e.item.title))])]},proxy:!0}],null,!0)},[s("iframe",{staticStyle:{"min-height":"80vh"},attrs:{src:"https://docs.google.com/gview?url="+e.value+"&embedded=true",frameborder:"0",width:"100%",height:"100%"}})])],1)]}}])})},le=[],ce={name:"school-summaries-table",props:["summaries-data"],data:function(){return{fields:["NO",{key:"title",label:"Title",sortable:!0,tdClass:"truncate-holder pr-4"},{key:"subject",label:"Subject",sortable:!1},{key:"Date",label:"Date",sortable:!1,tdClass:"text-center",thClass:"text-center"},{key:"file",label:"File",sortable:!1,tdClass:"text-center",thClass:"text-center"}],state:{loadings:{}}}},computed:{shownData:function(){return this.summariesData}},methods:{deleteItem:function(t){var e=this;this.$bvModal.msgBoxConfirm('Please confirm that you want to delete "'.concat(t.title,'".'),{title:"Please Confirm",size:"md",buttonSize:"sm",okVariant:"danger",okTitle:"YES, delete",cancelTitle:"Cancel",footerClass:"p-2",hideHeaderClose:!1,centered:!0}).then(function(){var s=Object(r["a"])(regeneratorRuntime.mark((function s(a){var n,o,i;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(!a){s.next=19;break}return e.$bvToast.show("delete-summary-toast"),n={action:"deleteSummaries",summaryId:t.id},s.prev=3,s.next=6,e.axios.post("deleteElements",n);case 6:o=s.sent,i=o.data,e.$bvToast.hide("delete-summary-toast"),e.$emit("data-changed"),console.log(i),e.$notify({title:"SUCCESS",message:i.message||"File deleted successfully",status:"success"}),s.next=19;break;case 14:s.prev=14,s.t0=s["catch"](3),e.$bvToast.hide("delete-summary-toast"),console.log(s.t0),e.$notify({title:"ERROR!",message:s.t0.errorMessage||"Failed to delete file.",status:"danger"});case 19:case"end":return s.stop()}}),s,null,[[3,14]])})));return function(t){return s.apply(this,arguments)}}()).catch((function(t){console.log(t),e.$notify({title:"ERROR!",message:"Oops, an error occured.",status:"danger"})}))}}},ue=ce,de=(s("6483"),Object(u["a"])(ue,re,le,!1,null,null,null)),me=de.exports,he={name:"school-summaries",components:{SummariesTable:me},data:function(){return{allSummaries:null,state:{loadingSummaries:!1}}},computed:{summariesAvailable:function(){return!!this.allSummaries&&!(this.allSummaries.length&&this.allSummaries.length<1)}},mounted:function(){this.fetchSummaries()},beforeMount:function(){this.$title("Summaries")},methods:{fetchSummaries:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var s,a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.state.loadingSummaries=!0,s={action:"getsummaries"},e.prev=2,e.next=5,t.axios.post("getItems",s);case 5:a=e.sent,n=a.data,t.state.loadingSummaries=!1,t.allSummaries=n,console.log(n),e.next=16;break;case 12:e.prev=12,e.t0=e["catch"](2),t.state.loadingSummaries=!1,console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[2,12]])})))()},refresh:function(){this.state.loadingSummaries||this.fetchSummaries()}}},be=he,fe=Object(u["a"])(be,oe,ie,!1,null,"43c59ab4",null),ge=fe.exports,pe=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("b-container",{staticClass:"emp-profile"},[s("b-form",[s("b-row",{staticClass:"row",attrs:{"no-gutters":"","align-h":"between"}},[s("b-col",[s("b-row",{attrs:{"no-gutters":""}},[s("b-col",{attrs:{md:"5"}},[s("div",{staticClass:"profile-img"},[s("img",{attrs:{src:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcS52y5aInsxSm31CvHOFHWujqUx_wWTS9iM6s7BAm21oEN_RiGoog",alt:""}}),s("div",{staticClass:"file btn btn-lg btn-primary"},[t._v(" Change Photo "),s("input",{attrs:{type:"file",name:"file"}})])])]),s("b-col",[s("div",{staticClass:"profile-head"},[s("h5",{staticClass:"text-md-left text-center"},[t._v(t._s(t.user.userame))]),s("h6",{staticClass:"text-md-left text-center"},[t._v(" "+t._s(t.user.user_type)+" ")])])])],1)],1),s("b-col",{staticClass:"d-flex justify-content-center d-md-block mt-2 mt-md-0",attrs:{md:"auto"}},[s("b-button",{staticClass:"profile-edit-btn px-4 d-none",attrs:{variant:"light"}},[t._v(" Edit Profile ")])],1)],1),s("b-row",{staticClass:"pt-4",attrs:{"no-gutters":"","align-h":"center"}},[s("b-col",{attrs:{md:"11"}},[s("b-tabs",{staticClass:"profile-tab",attrs:{"content-class":"p-3 pt-4",id:"myTabContent"}},[t.user?s("b-tab",{attrs:{title:"About",active:"","title-link-class":"custom-title",id:"home"}},[t.user.userame?s("b-row",{attrs:{"no-gutters":""}},[s("b-col",{attrs:{md:"6"}},[s("label",[t._v("Name")])]),s("b-col",{attrs:{md:"6"}},[s("p",[t._v(t._s(t.user.userame))])])],1):t._e(),t.user.phone?s("b-row",{attrs:{"no-gutters":""}},[s("b-col",{attrs:{md:"6"}},[s("label",[t._v("Phone Number")])]),s("b-col",{attrs:{md:"6"}},[s("p",[t._v(t._s(t.user.phone))])])],1):t._e(),t.user.subjectName?s("b-row",{attrs:{"no-gutters":""}},[s("b-col",{attrs:{md:"6"}},[s("label",[t._v("Subject")])]),s("b-col",{attrs:{md:"6"}},[s("p",[t._v(t._s(t.user.subjectName))])])],1):t._e()],1):t._e()],1)],1)],1)],1)],1)},ve=[],xe={name:"admin-profile",computed:{user:function(){return this.$store.state.school.data}},mounted:function(){console.log(this.user)},beforeMount:function(){this.$title("Profile"),console.log(this.user)}},ke=xe,ye=(s("f076"),s("b8a5"),Object(u["a"])(ke,pe,ve,!1,null,"c83cfe80",null)),_e=ye.exports,we=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("b-container",{staticClass:"school-chatroom pt-3",attrs:{fluid:""}},[s("b-row",{staticClass:"header p-3",attrs:{"no-gutters":"","align-h":"between"}},[s("b-col",[s("header",{staticClass:"py-4"},[s("h3",{},[t._v("Chatroom")])])]),s("b-col",{staticClass:"d-flex align-items-center",attrs:{cols:"auto"}},[s("b-form",{attrs:{inline:""}},[s("b-form-group",{staticClass:"mx-2"},[s("b-form-select",{attrs:{disabled:t.disableLevels},scopedSlots:t._u([{key:"first",fn:function(){return[s("b-form-select-option",{attrs:{value:"",disabled:""}},[t._v(" Select Level ")])]},proxy:!0}]),model:{value:t.level,callback:function(e){t.level=e},expression:"level"}},t._l(t.levels,(function(e,a){return s("b-form-select-option",{key:a,attrs:{value:e}},[t._v(" "+t._s(e.title)+" ")])})),1)],1),s("b-form-group",{staticClass:"ml-2"},[s("b-button",{staticClass:"ml-1",attrs:{variant:"dark",disabled:t.state.loadingMessages},on:{click:t.refresh}},[t.state.loadingMessages?s("b-spinner",{attrs:{small:"",variant:"light"}}):s("div",[t._v("Refresh")])],1)],1)],1)],1)],1),s("b-row",{staticClass:"my-3 messages-holder",attrs:{"no-gutters":""}},[s("chat-box",{attrs:{messages:t.messages},on:{"send-message":t.sendMessage}})],1)],1)},Ce=[],Se=s("9b24"),Ae={name:"school-chatroom",components:{chatBox:Se["a"]},data:function(){return{state:{loadingMessages:!1,loadingLevels:!1},levels:[],level:"",messages:[],totalPages:null,currentPage:1}},computed:{disableLevels:function(){return!!this.state.loadingLevels||this.levels.length<1},user:function(){return this.$store.state.school.data}},watch:{level:function(){this.fetchMessages()}},beforeMount:function(){this.$title("chatroom"),this.fetchLevels()},methods:{fetchMessages:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var s,a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.level){e.next=2;break}return e.abrupt("return");case 2:if(null!==t.totalPages||1==t.currentPage){e.next=4;break}return e.abrupt("return");case 4:return t.state.loadingMessages=!0,s={action:"getMessage",level:t.level.id,page:t.currentPage},e.next=8,t.axios.post("chat",s);case 8:a=e.sent,n=a.data,console.log(n),t.$set(t,"totalPages",n.number_of_page),function(e){return e.sentBy==t.user.userame?e.mine=!0:e.mine=!1,e},t.state.loadingMessages=!1;case 14:case"end":return e.stop()}}),e)})))()},sendMessage:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function s(){var a,n,o;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return e.messages.push({UserType:"student",id:"10131",massage:t,mine:!0,sentBy:e.user.userame,time:"2021-03-25 12:01:28"}),a={action:"InsertMessage",message:t,userId:e.user.user_id,level:e.level,type:e.user.user_type},s.prev=2,s.next=5,e.axios.post("chat",a);case 5:n=s.sent,o=n.data,console.log(o),s.next=13;break;case 10:s.prev=10,s.t0=s["catch"](2),console.log(s.t0);case 13:case"end":return s.stop()}}),s,null,[[2,10]])})))()},fetchLevels:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var s,a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.state.loadingLevels=!0,s={action:"getLevels"},e.prev=2,e.next=5,t.axios.post("getElements",s);case 5:a=e.sent,n=a.data,t.levels=n,e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](2),console.log(e.t0);case 13:t.state.loadingLevels=!1;case 14:case"end":return e.stop()}}),e,null,[[2,10]])})))()},refresh:function(){this.fetchLevels(),this.fetchMessages()}}},je=Ae,ze=(s("c51a"),Object(u["a"])(je,we,Ce,!1,null,"140df9aa",null)),Ne=ze.exports,$e=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("b-container",{staticClass:"school-chatroom pt-3",attrs:{fluid:""}},[s("b-row",{staticClass:"header p-3",attrs:{"no-gutters":"","align-h":"between"}},[s("b-col",[s("header",{staticClass:"py-4"},[s("h3",{},[t._v("Messaging")])])]),s("b-col",{staticClass:"d-flex align-items-center",attrs:{cols:"auto"}},[s("b-form",{attrs:{inline:""}},[s("b-form-group",{staticClass:"mx-2"},[s("b-form-select",{attrs:{disabled:t.disableLevels},scopedSlots:t._u([{key:"first",fn:function(){return[s("b-form-select-option",{attrs:{value:"",disabled:""}},[t._v(" Select Level ")])]},proxy:!0}]),model:{value:t.level,callback:function(e){t.level=e},expression:"level"}},t._l(t.levels,(function(e,a){return s("b-form-select-option",{key:a,attrs:{value:e}},[t._v(" "+t._s(e.title)+" ")])})),1)],1),s("b-form-group",{staticClass:"ml-2"},[s("b-button",{staticClass:"ml-1",attrs:{variant:"dark",disabled:t.state.loadingLevels},on:{click:t.fetchLevels}},[t.state.loadingLevels?s("b-spinner",{attrs:{small:"",variant:"light"}}):s("div",[t._v("Refresh")])],1)],1)],1)],1),s("b-col",{staticClass:"px-3 d-flex align-items-center",attrs:{cols:"auto"}},[s("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal",value:"school-messaging-recipients-modal",expression:"'school-messaging-recipients-modal'"}],attrs:{variant:"dark",disabled:!t.studentsAvailable}},[t.state.loadingStudents?s("b-spinner",{attrs:{small:"",variant:"light"}}):s("div",[t._v("Select Recipients")])],1)],1)],1),s("b-row",{staticClass:"my-3 messages-holder",attrs:{"no-gutters":""}},[s("chat-box",{attrs:{messages:t.messages},on:{"send-message":t.sendMessage}})],1),s("b-modal",{attrs:{title:"Choose Recipients",id:"school-messaging-recipients-modal",scrollable:""},on:{ok:t.handleOk}},[s("b-container",{attrs:{fluid:""}},[s("b-row",{attrs:{"no-gutters":"","align-h":"start","align-v":"center"}},[s("b-col",{attrs:{cols:"auto"}},[s("b-form",[s("b-form-group",{staticClass:"m-0"},[s("b-form-checkbox",{on:{change:t.toggleAll},model:{value:t.state.allSelected,callback:function(e){t.$set(t.state,"allSelected",e)},expression:"state.allSelected"}},[t._v(" "+t._s(t.state.allSelected?"Un-select All":"Select All")+" ")])],1)],1)],1)],1),s("b-row",{staticClass:"mt-4",attrs:{"no-gutters":""}},[s("b-form",[s("b-form-group",{scopedSlots:t._u([{key:"default",fn:function(e){var a=e.ariaDescribedby;return t._l(t.allStudents,(function(e,n){return s("b-form-checkbox",{key:n,attrs:{"aria-describedby":a,stacked:"",checked:t.selectedNumbers,value:e.phone},on:{change:function(s){return t.selectPhone(e)}}},[t._v(" "+t._s(e.fname)+" "+t._s(e.lname)+" ")])}))}}])})],1)],1)],1)],1)],1)},Re=[],Oe=(s("caad"),s("d3b7"),s("6062"),s("2532"),s("3ca3"),s("ddb0"),{name:"school-chatroom",components:{chatBox:Se["a"]},data:function(){return{state:{loadingMessages:!1,loadingLevels:!1,loadingStudents:!1,allSelected:!1},levels:[],level:"",messages:[],allStudents:[],selectedNumbers:[]}},computed:{disableLevels:function(){return!!this.state.loadingLevels||this.levels.length<1},studentsAvailable:function(){return!this.state.loadingStudents&&(this.allStudents.length>0||(console.log("hello"),!1))},user:function(){return this.$store.state.school.data}},watch:{level:function(){this.fetchStudents()}},beforeMount:function(){this.$title("Messaging"),this.fetchLevels()},methods:{sendMessage:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function s(){var a,n,o,i;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(!(e.selectedNumbers.length<1)){s.next=3;break}return e.$notify({title:"ERROR!",message:"Select at least one student.",status:"danger"}),s.abrupt("return");case 3:return e.messages.push({UserType:"student",id:"1",massage:t,mine:!0,sentBy:e.user.userame,time:"2021-03-25 12:01:28"}),a=function(e){return{telephoneNumber:e,message:t}},n={action:"SendMessages",numbers:e.selectedNumbers.map(a)},s.prev=6,s.next=9,e.axios.post("messaging",n);case 9:o=s.sent,i=o.data,console.log(i),e.$notify({title:"SUCCESS!",message:"Message sent.",status:"success"}),s.next=19;break;case 15:s.prev=15,s.t0=s["catch"](6),console.log(s.t0),e.$notify({title:"ERROR!",message:"Failed to send message.",status:"danger"});case 19:case"end":return s.stop()}}),s,null,[[6,15]])})))()},fetchStudents:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var s,a,n,o,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.state.loadingStudents=!0,s={action:"getStudents",school:t.user.school,level:t.level.id||t.levels[0].id},e.prev=2,e.next=5,t.axios.post("messaging",s);case 5:a=e.sent,n=a.data,Array.isArray(n)&&(o=new Set,i=n.filter((function(t){var e=o.has(t.phone);return o.add(t.phone),!e})),t.$set(t,"allStudents",i)),console.log(n),t.state.loadingStudents=!1,e.next=16;break;case 12:e.prev=12,e.t0=e["catch"](2),t.state.loadingStudents=!1,console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[2,12]])})))()},handleOk:function(){console.log(this.selectedNumbers)},fetchLevels:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var s,a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.state.loadingLevels=!0,s={action:"getLevels"},e.prev=2,e.next=5,t.axios.post("getElements",s);case 5:a=e.sent,n=a.data,Array.isArray(n)&&(t.levels=n,t.level=n[0]),console.log(n),e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](2),console.log(e.t0);case 14:t.state.loadingLevels=!1;case 15:case"end":return e.stop()}}),e,null,[[2,11]])})))()},selectPhone:function(t){if(this.isChecked(t)){var e=function(e){return e.phone!=t.phone};this.$set(this,"selectedNumbers",this.selectedNumbers.filter(e))}else{if(this.selectedNumbers.includes(t.phone))return;this.selectedNumbers.push(t.phone)}this.state.allSelected=!1},isChecked:function(t){return this.selectedNumbers.includes(t.phone)},toggleAll:function(t){this.selectedNumbers=t?this.allStudents.map((function(t){return t.phone})):[]}}}),Qe=Oe,qe=(s("e64c"),Object(u["a"])(Qe,$e,Re,!1,null,"1602bce0",null)),Te=qe.exports,Le=[{path:"/school",component:_,meta:{requireAuth:!0},children:[{path:"",redirect:{name:"school-teachers"},meta:{requireAuth:!0}},{path:"teachers",name:"school-teachers",component:V,meta:{requireAuth:!0}},{path:"students/:page",name:"school-students",component:q,meta:{requireAuth:!0}},{path:"assignments",name:"school-assignments",component:nt,meta:{requireAuth:!0}},{path:"messaging",name:"school-messaging",component:Te,meta:{requireAuth:!0}},{path:"chatroom",name:"school-chatrooms",component:Ne,meta:{requireAuth:!0}},{path:"notes",name:"school-notes",component:_t,meta:{requireAuth:!0}},{path:"summaries",name:"school-summaries",component:ge,meta:{requireAuth:!0}},{path:"books",name:"school-books",component:qt,meta:{requireAuth:!0}},{path:"quizes",name:"school-quizes",component:ne,meta:{requireAuth:!0}},{path:"quiz/:id",name:"school-quiz",component:Bt,meta:{requireAuth:!0}},{path:"profile",name:"school-profile",component:_e,meta:{requireAuth:!0}}]}];e["a"]=Le}}]);